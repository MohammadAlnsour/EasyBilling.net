2025-10-20 14:54:27.747 +03:00 [INF] Worker running at: "2025-10-20T14:54:27.7471902+03:00"
2025-10-20 14:54:27.758 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:27.766 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:27.767 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:27.769 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.773 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.783 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.786 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:27.790 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:27.793 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:27.808 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:27.814 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:27.817 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:27.821 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.826 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:27.831 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.834 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:27.899 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:27.903 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.906 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.909 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.911 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:27.913 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:27.916 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.922 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.925 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.927 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:27.929 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.932 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:27.935 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.937 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.938 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:27.940 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:27.959 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:27.963 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.966 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:27.988 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:27.992 +03:00 [INF] Worker running at: "2025-10-20T14:54:27.9924772+03:00"
2025-10-20 14:54:27.997 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:28.003 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:28.007 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:28.013 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.016 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.018 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.021 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:28.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:28.030 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.055 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.059 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.062 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.066 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.069 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:28.072 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.074 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:28.137 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:28.144 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.146 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.148 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.150 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:28.153 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:28.155 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.160 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.164 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.166 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:28.169 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.171 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:28.176 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.178 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.180 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:28.182 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:28.207 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:28.209 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.212 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:28.234 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:28.236 +03:00 [INF] Worker running at: "2025-10-20T14:54:28.2366356+03:00"
2025-10-20 14:54:28.238 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:28.243 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:28.244 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:28.246 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.248 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.251 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.253 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:28.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:28.258 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.271 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.275 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.277 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.280 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.282 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:28.285 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.287 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:28.346 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:28.350 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.352 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.354 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.356 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:28.358 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:28.361 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.367 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.370 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.373 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:28.376 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.378 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:28.381 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.383 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.386 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:28.390 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:28.411 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:28.415 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.419 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:28.462 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:28.466 +03:00 [INF] Worker running at: "2025-10-20T14:54:28.4669748+03:00"
2025-10-20 14:54:28.470 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:28.478 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:28.480 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:28.482 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.485 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.489 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.493 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:28.496 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:28.499 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.528 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.537 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.542 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.546 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.549 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:28.556 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.561 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:28.667 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:28.672 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.676 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.679 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.681 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:28.684 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:28.686 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.696 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.701 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.705 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:28.708 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.711 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:28.715 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.717 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.719 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:28.721 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:28.747 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:28.750 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.754 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:28.777 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:28.779 +03:00 [INF] Worker running at: "2025-10-20T14:54:28.7795647+03:00"
2025-10-20 14:54:28.782 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:28.785 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:28.787 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:28.790 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.794 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.797 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.799 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:28.802 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:28.805 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.817 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:28.821 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.825 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:28.827 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.829 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:28.831 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.835 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:28.908 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:28.913 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.918 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.923 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:28.926 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:28.929 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:28.932 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.941 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:28.947 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.951 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:28.955 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:28.959 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:28.963 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.967 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:28.972 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:28.976 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:29.007 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:29.012 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.016 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:29.039 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:29.043 +03:00 [INF] Worker running at: "2025-10-20T14:54:29.0435604+03:00"
2025-10-20 14:54:29.047 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:29.052 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:29.054 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:29.056 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.058 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.061 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.064 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:29.066 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:29.069 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:29.085 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:29.089 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:29.092 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:29.097 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.099 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:29.105 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.109 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:29.204 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:29.208 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.210 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.213 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.217 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:29.220 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:29.224 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:29.230 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:29.234 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.236 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:29.239 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.242 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:29.245 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:29.248 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:29.250 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:29.251 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:29.270 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:29.272 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.274 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:29.298 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:29.302 +03:00 [INF] Worker running at: "2025-10-20T14:54:29.3026460+03:00"
2025-10-20 14:54:29.306 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:29.312 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:29.316 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:29.320 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.327 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.332 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.334 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:29.336 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:29.340 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:29.370 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:29.381 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:29.386 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:29.390 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.394 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 13ms reading results.
2025-10-20 14:54:29.398 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.403 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:29.488 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:29.491 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.493 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.496 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.500 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:29.503 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:29.506 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:29.516 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:29.523 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.528 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:29.532 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.536 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:29.540 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:29.543 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:29.546 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:29.549 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:29.573 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:29.575 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.580 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:29.622 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:29.629 +03:00 [INF] Worker running at: "2025-10-20T14:54:29.6290973+03:00"
2025-10-20 14:54:29.633 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:29.641 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:29.644 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:29.646 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.649 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.653 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.657 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:29.661 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:29.664 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:29.684 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:29.695 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:29.699 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:29.704 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.709 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 14ms reading results.
2025-10-20 14:54:29.713 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.717 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:29.783 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:29.789 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.793 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.799 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.805 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:29.813 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-10-20 14:54:29.818 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:29.826 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:29.831 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.835 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:29.841 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.844 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:29.848 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:29.850 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:29.852 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:29.856 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:29.884 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:29.891 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.894 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:29.932 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:29.935 +03:00 [INF] Worker running at: "2025-10-20T14:54:29.9358030+03:00"
2025-10-20 14:54:29.941 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:29.948 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:29.950 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:29.954 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.959 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:29.963 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:29.967 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:29.972 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:29.977 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.009 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.019 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.024 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.030 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.035 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 16ms reading results.
2025-10-20 14:54:30.040 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.045 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:30.123 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:30.129 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.134 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.138 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:30.143 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:30.147 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:30.151 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:30.165 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:30.176 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.181 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:30.190 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.195 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:30.199 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:30.202 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:30.204 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:30.207 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:30.230 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:30.233 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.235 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:30.258 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:30.261 +03:00 [INF] Worker running at: "2025-10-20T14:54:30.2615123+03:00"
2025-10-20 14:54:30.264 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:30.268 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:30.270 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:30.273 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.275 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.278 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:30.281 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:30.284 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:30.286 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.308 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.315 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.320 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.326 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.331 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 16ms reading results.
2025-10-20 14:54:30.336 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.346 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (9ms).
2025-10-20 14:54:30.456 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:30.461 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.466 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.468 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:30.470 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:30.472 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:30.474 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:30.481 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:30.486 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.489 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:30.492 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.494 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:30.497 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:30.499 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:30.502 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:30.504 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:30.534 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:30.537 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.539 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:30.575 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:30.581 +03:00 [INF] Worker running at: "2025-10-20T14:54:30.5810591+03:00"
2025-10-20 14:54:30.583 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:30.588 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:30.589 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:30.593 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.595 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.598 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:30.600 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:30.602 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:30.605 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.623 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.628 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.632 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.635 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.637 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:30.640 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.643 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:30.747 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:30.750 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.752 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.757 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:30.760 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:30.764 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:30.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:30.775 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:30.782 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.785 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:30.788 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.791 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:30.794 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:30.795 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:30.798 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:30.801 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:30.825 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:30.827 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.829 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:30.861 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:30.868 +03:00 [INF] Worker running at: "2025-10-20T14:54:30.8682477+03:00"
2025-10-20 14:54:30.873 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:30.880 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:30.884 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:30.887 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.891 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.894 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:30.898 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:30.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:30.908 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.935 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:30.943 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.948 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:30.951 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.954 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:30.957 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:30.961 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:31.033 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:31.038 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.042 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.045 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.047 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:31.053 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:31.057 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.067 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.073 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.077 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:31.081 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.084 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:31.090 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.093 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.096 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:31.099 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:31.139 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:31.144 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.148 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:31.190 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:31.196 +03:00 [INF] Worker running at: "2025-10-20T14:54:31.1960669+03:00"
2025-10-20 14:54:31.199 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:31.204 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:31.206 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:31.211 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.215 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.222 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:31.226 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:31.230 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:31.249 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:31.255 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:31.260 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:31.263 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.267 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:31.271 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.277 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:31.359 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:31.365 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.367 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.370 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.373 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:31.375 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:31.378 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.387 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.393 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.397 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:31.402 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.407 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:31.411 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.415 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.419 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:31.422 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:31.461 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:31.466 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.470 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:31.513 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:31.517 +03:00 [INF] Worker running at: "2025-10-20T14:54:31.5177920+03:00"
2025-10-20 14:54:31.523 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:31.531 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:31.533 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:31.536 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.541 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.544 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.547 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:31.550 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:31.555 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:31.583 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:31.594 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:31.600 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:31.605 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.608 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 14ms reading results.
2025-10-20 14:54:31.612 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.617 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:31.685 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:31.688 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.691 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.695 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.698 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:31.701 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:31.705 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.713 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.718 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.720 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:31.723 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.726 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:31.729 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.730 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.732 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:31.734 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:31.768 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:31.770 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.773 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:31.794 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:31.797 +03:00 [INF] Worker running at: "2025-10-20T14:54:31.7970256+03:00"
2025-10-20 14:54:31.800 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:31.804 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:31.805 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:31.807 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.810 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.813 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:31.820 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:31.822 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:31.837 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:31.841 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:31.845 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:31.848 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.852 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:31.854 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.856 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:31.914 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:31.917 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.921 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.924 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:31.925 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:31.927 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:31.930 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.936 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:31.940 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.942 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:31.946 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.949 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:31.953 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.956 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:31.959 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:31.961 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:31.981 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:31.983 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:31.985 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:32.010 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:32.014 +03:00 [INF] Worker running at: "2025-10-20T14:54:32.0145631+03:00"
2025-10-20 14:54:32.018 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:32.022 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:32.024 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:32.026 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.028 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.034 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:32.037 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.051 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.056 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.058 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.061 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.063 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:32.066 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.069 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:32.121 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:32.124 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.126 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.131 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:32.136 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:32.139 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.145 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.152 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.155 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:32.159 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.162 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:32.166 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.169 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.171 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:32.173 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:32.192 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:32.197 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.199 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:32.220 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:32.223 +03:00 [INF] Worker running at: "2025-10-20T14:54:32.2238687+03:00"
2025-10-20 14:54:32.225 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:32.230 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:32.232 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:32.234 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.237 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.239 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.241 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.243 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:32.245 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.257 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.262 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.265 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.267 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.269 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:32.272 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.275 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:32.335 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:32.339 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.341 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.343 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.345 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.347 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:32.349 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.356 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.362 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.364 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:32.367 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.370 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:32.372 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.375 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.378 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:32.380 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:32.400 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:32.404 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.408 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:32.432 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:32.436 +03:00 [INF] Worker running at: "2025-10-20T14:54:32.4360560+03:00"
2025-10-20 14:54:32.439 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:32.444 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:32.446 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:32.447 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.449 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.453 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.456 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:32.458 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.471 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.477 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.480 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.483 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.486 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:32.491 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.493 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:32.555 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:32.560 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.562 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.565 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.567 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.569 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:32.571 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.577 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.582 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.586 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:32.590 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.592 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:32.595 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.596 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.598 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:32.601 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:32.621 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:32.624 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.628 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:32.652 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:32.656 +03:00 [INF] Worker running at: "2025-10-20T14:54:32.6567639+03:00"
2025-10-20 14:54:32.659 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:32.665 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:32.666 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:32.668 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.670 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.671 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.673 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.675 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:32.678 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.689 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.695 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.697 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.699 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.703 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:32.707 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.710 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:32.777 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:32.780 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.782 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.784 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.786 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.789 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:32.792 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.799 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:32.802 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.804 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:32.807 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.809 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:32.811 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.813 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:32.815 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:32.817 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:32.836 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:32.839 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.842 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:32.873 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:32.877 +03:00 [INF] Worker running at: "2025-10-20T14:54:32.8775341+03:00"
2025-10-20 14:54:32.880 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:32.884 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:32.886 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:32.888 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.894 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.898 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:32.899 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:32.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:32.905 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.920 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:32.925 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.928 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:32.931 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.933 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:32.937 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:32.941 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:33.001 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:33.006 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.010 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.012 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.014 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.017 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:33.020 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.026 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.031 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.033 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:33.037 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.040 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:33.043 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.045 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.047 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:33.049 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:33.068 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:33.072 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.076 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:33.098 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:33.101 +03:00 [INF] Worker running at: "2025-10-20T14:54:33.1009948+03:00"
2025-10-20 14:54:33.104 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:33.107 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:33.109 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:33.111 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.113 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.117 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.119 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:33.122 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.136 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.140 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.144 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.147 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.149 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:33.152 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.154 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:33.210 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:33.213 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.216 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.220 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.222 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:33.225 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.231 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.235 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.237 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:33.240 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.242 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:33.244 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.246 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.247 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:33.249 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:33.269 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:33.271 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.273 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:33.294 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:33.296 +03:00 [INF] Worker running at: "2025-10-20T14:54:33.2962939+03:00"
2025-10-20 14:54:33.298 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:33.302 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:33.304 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:33.306 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.308 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.310 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.312 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.314 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:33.317 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.330 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.335 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.338 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.342 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.345 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:33.348 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.350 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:33.418 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:33.425 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.429 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.431 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:33.436 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:33.438 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.442 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.446 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.448 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:33.451 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.452 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:33.456 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.458 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.460 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:33.461 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:33.481 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:33.484 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.487 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:33.509 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:33.511 +03:00 [INF] Worker running at: "2025-10-20T14:54:33.5114851+03:00"
2025-10-20 14:54:33.514 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:33.519 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:33.521 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:33.522 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.524 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.526 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.528 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.530 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:33.532 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.547 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.552 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.556 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.558 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.562 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:33.566 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.569 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:33.633 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:33.636 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.640 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.644 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:33.649 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:33.653 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.663 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.669 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.673 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:33.678 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.681 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:33.685 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.687 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.691 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:33.694 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:33.715 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:33.717 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.719 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:33.738 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:33.742 +03:00 [INF] Worker running at: "2025-10-20T14:54:33.7425038+03:00"
2025-10-20 14:54:33.745 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:33.749 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:33.750 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:33.752 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.754 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.756 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.758 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.761 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:33.765 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.781 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:33.786 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.788 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:33.791 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.793 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:33.796 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.798 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:33.856 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:33.861 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.863 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.867 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:33.871 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:33.875 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.882 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:33.888 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.891 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:33.895 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.898 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:33.902 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.905 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:33.907 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:33.911 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:33.931 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:33.934 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.938 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:33.962 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:33.966 +03:00 [INF] Worker running at: "2025-10-20T14:54:33.9663068+03:00"
2025-10-20 14:54:33.969 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:33.975 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:33.976 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:33.978 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.980 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:33.983 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:33.986 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:33.988 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:33.990 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.002 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.007 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.009 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.011 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.016 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:34.019 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.021 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:34.079 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:34.083 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.085 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.090 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.092 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:34.095 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:34.097 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.103 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.107 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.111 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:34.113 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.116 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:34.120 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.123 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.127 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:34.129 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:34.149 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:34.151 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.155 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:34.179 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:34.182 +03:00 [INF] Worker running at: "2025-10-20T14:54:34.1821392+03:00"
2025-10-20 14:54:34.186 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:34.192 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:34.193 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:34.196 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.199 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.201 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.203 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:34.206 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:34.209 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.232 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.239 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.242 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.243 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.245 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:34.248 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.251 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:34.314 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:34.321 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.324 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.330 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.332 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:34.334 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:34.336 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.343 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.347 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.350 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:34.353 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.355 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:34.358 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.360 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.362 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:34.365 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:34.385 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:34.389 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.392 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:34.413 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:34.415 +03:00 [INF] Worker running at: "2025-10-20T14:54:34.4152869+03:00"
2025-10-20 14:54:34.417 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:34.424 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:34.425 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:34.427 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.429 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.432 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.435 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:34.438 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:34.441 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.458 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.464 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.470 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.473 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.475 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:34.479 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.482 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:34.544 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:34.551 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.554 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.559 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.562 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:34.565 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:34.569 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.577 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.581 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.584 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:34.588 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.591 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:34.595 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.598 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.605 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:34.609 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:34.635 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:34.638 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.641 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:34.665 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:34.670 +03:00 [INF] Worker running at: "2025-10-20T14:54:34.6709598+03:00"
2025-10-20 14:54:34.674 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:34.679 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:34.682 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:34.685 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.688 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.693 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:34.696 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:34.699 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.710 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.714 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.717 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.719 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.723 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:34.727 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.730 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:34.788 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:34.792 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.794 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.796 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:34.804 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:34.807 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.812 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:34.817 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.821 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:34.825 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.827 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:34.830 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.832 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:34.835 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:34.838 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:34.861 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:34.863 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.867 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:34.894 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:34.899 +03:00 [INF] Worker running at: "2025-10-20T14:54:34.8992502+03:00"
2025-10-20 14:54:34.904 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:34.909 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:34.912 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:34.914 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.918 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.921 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:34.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:34.927 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:34.930 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.952 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:34.958 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.963 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:34.966 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.968 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:34.971 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:34.974 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:35.037 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:35.041 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.046 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.053 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:35.057 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:35.059 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.064 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.069 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.072 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:35.074 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.076 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:35.079 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.081 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.084 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:35.087 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:35.109 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:35.114 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.120 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-10-20 14:54:35.145 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:35.148 +03:00 [INF] Worker running at: "2025-10-20T14:54:35.1485245+03:00"
2025-10-20 14:54:35.152 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:35.157 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:35.159 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:35.161 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.163 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.166 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.168 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:35.170 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:35.172 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.188 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.195 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.199 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.201 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.205 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:35.210 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.213 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:35.280 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:35.284 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.286 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.288 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:35.295 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:35.298 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.305 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.309 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.311 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:35.314 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.316 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:35.319 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.321 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.322 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:35.324 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:35.342 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:35.345 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.347 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:35.365 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:35.368 +03:00 [INF] Worker running at: "2025-10-20T14:54:35.3683882+03:00"
2025-10-20 14:54:35.370 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:35.375 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:35.376 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:35.377 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.380 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.382 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.383 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:35.386 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:35.389 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.405 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.410 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.412 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.415 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.417 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:35.419 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.422 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:35.473 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:35.476 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.478 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.480 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.482 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:35.484 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:35.486 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.493 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.498 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.500 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:35.503 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.505 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:35.507 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.509 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.511 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:35.512 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:35.537 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:35.540 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.542 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:35.565 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:35.568 +03:00 [INF] Worker running at: "2025-10-20T14:54:35.5686189+03:00"
2025-10-20 14:54:35.571 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:35.575 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:35.577 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:35.579 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.581 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.583 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.585 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:35.587 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:35.589 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.602 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.607 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.609 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.611 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.614 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:35.616 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.618 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:35.682 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:35.687 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.691 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.695 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.697 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:35.700 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:35.703 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.711 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.716 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.718 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:35.721 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.723 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:35.725 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.727 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.729 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:35.731 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:35.755 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:35.757 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.759 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:35.781 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:35.785 +03:00 [INF] Worker running at: "2025-10-20T14:54:35.7852043+03:00"
2025-10-20 14:54:35.787 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:35.792 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:35.794 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:35.796 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.798 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.802 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.804 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:35.808 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:35.810 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.831 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:35.839 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.841 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:35.843 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.846 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:35.851 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.853 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:35.912 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:35.918 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.921 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.924 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:35.927 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:35.930 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:35.933 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.938 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:35.942 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.945 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:35.947 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.949 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:35.951 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.954 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:35.956 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:35.959 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:35.980 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:35.982 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:35.985 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:36.008 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:36.011 +03:00 [INF] Worker running at: "2025-10-20T14:54:36.0114198+03:00"
2025-10-20 14:54:36.014 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:36.019 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:36.021 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:36.024 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.028 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:36.034 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:36.036 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.049 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.052 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.055 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.057 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.059 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:36.061 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.064 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:36.130 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:36.138 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.143 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.147 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.151 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:36.156 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:36.162 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.174 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.183 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.187 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:36.194 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.197 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:36.202 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.205 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.208 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:36.212 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:36.239 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:36.242 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.246 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:36.270 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:36.272 +03:00 [INF] Worker running at: "2025-10-20T14:54:36.2728085+03:00"
2025-10-20 14:54:36.275 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:36.280 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:36.282 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:36.284 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.296 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.303 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:36.305 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:36.308 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.323 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.329 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.331 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.334 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.337 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:36.340 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.344 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:36.403 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:36.408 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.411 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.414 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.417 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:36.420 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:36.424 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.433 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.439 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.443 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:36.446 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.449 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:36.454 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.457 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.460 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:36.462 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:36.485 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:36.488 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.490 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:36.520 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:36.525 +03:00 [INF] Worker running at: "2025-10-20T14:54:36.5251964+03:00"
2025-10-20 14:54:36.527 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:36.533 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:36.536 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:36.539 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.543 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.548 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.551 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:36.554 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:36.558 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.575 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.582 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.585 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.588 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.591 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:36.595 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.597 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:36.660 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:36.665 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.668 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.671 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.674 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:36.678 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:36.681 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.688 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.693 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.695 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:36.698 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.700 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:36.703 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.705 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.707 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:36.709 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:36.728 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:36.732 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.736 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:36.760 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:36.766 +03:00 [INF] Worker running at: "2025-10-20T14:54:36.7661605+03:00"
2025-10-20 14:54:36.771 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:36.782 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:36.788 +03:00 [DBG] Created DbConnection. (5ms).
2025-10-20 14:54:36.792 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.798 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.802 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.805 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:36.808 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:36.811 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.824 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:36.829 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.832 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:36.834 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.838 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:36.842 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.845 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:36.906 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:36.912 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.915 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.918 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:36.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:36.924 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:36.927 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.934 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:36.939 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.942 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:36.946 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.948 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:36.951 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.954 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:36.956 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:36.959 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:36.978 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:36.983 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:36.988 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:37.012 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:37.016 +03:00 [INF] Worker running at: "2025-10-20T14:54:37.0166016+03:00"
2025-10-20 14:54:37.022 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:37.028 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:37.030 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:37.034 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.038 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.042 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.044 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:37.048 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:37.052 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.066 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.071 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.074 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.076 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.079 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:37.082 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.085 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:37.147 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:37.151 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.154 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.157 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.159 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:37.162 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:37.165 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.171 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.175 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.178 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:37.182 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.185 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:37.189 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.191 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.194 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:37.197 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:37.218 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:37.222 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.225 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:37.252 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:37.258 +03:00 [INF] Worker running at: "2025-10-20T14:54:37.2589479+03:00"
2025-10-20 14:54:37.262 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:37.266 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:37.268 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:37.270 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.273 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.276 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.278 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:37.281 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:37.284 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.298 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.304 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.307 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.310 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.312 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:37.315 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.317 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:37.378 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:37.384 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.388 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.391 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.393 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:37.396 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:37.399 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.408 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.418 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.423 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:37.428 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.433 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:37.437 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.441 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.444 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:37.446 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:37.468 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:37.472 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.475 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:37.496 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:37.499 +03:00 [INF] Worker running at: "2025-10-20T14:54:37.4990055+03:00"
2025-10-20 14:54:37.503 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:37.507 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:37.508 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:37.510 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.512 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.514 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.517 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:37.521 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:37.523 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.548 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.559 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.562 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.566 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.570 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:37.572 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.574 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:37.631 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:37.634 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.636 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.642 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.646 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:37.649 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:37.652 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.659 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.664 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.667 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:37.670 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.674 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:37.677 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.679 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.681 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:37.682 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:37.701 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:37.705 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.709 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:37.732 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:37.735 +03:00 [INF] Worker running at: "2025-10-20T14:54:37.7354135+03:00"
2025-10-20 14:54:37.739 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:37.745 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:37.746 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:37.748 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.750 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.753 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.756 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:37.758 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:37.761 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.775 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.781 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.784 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.786 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.789 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:37.792 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.794 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:37.845 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:37.848 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.850 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.853 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.854 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:37.857 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:37.860 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.866 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:37.869 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.872 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:37.875 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.878 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:37.881 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.882 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:37.884 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:37.886 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:37.906 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:37.907 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.911 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:37.933 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:37.935 +03:00 [INF] Worker running at: "2025-10-20T14:54:37.9356039+03:00"
2025-10-20 14:54:37.939 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:37.942 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:37.944 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:37.945 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.948 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.952 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:37.953 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:37.956 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:37.960 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.974 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:37.980 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.983 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:37.986 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.989 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:37.991 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:37.995 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:38.050 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:38.055 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.058 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.060 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.062 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:38.064 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:38.066 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.071 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.075 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.077 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:38.080 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.082 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:38.085 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.087 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.089 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:38.091 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:38.110 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:38.112 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.115 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:38.139 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:38.141 +03:00 [INF] Worker running at: "2025-10-20T14:54:38.1416297+03:00"
2025-10-20 14:54:38.144 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:38.149 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:38.151 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:38.155 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.160 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.163 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.165 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:38.167 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:38.170 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.188 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.194 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.197 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.200 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.204 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:38.207 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.210 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:38.270 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:38.276 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.277 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.281 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.283 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:38.286 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:38.288 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.295 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.299 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.301 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:38.305 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.308 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:38.311 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.312 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.314 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:38.317 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:38.338 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:38.340 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.343 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:38.367 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:38.370 +03:00 [INF] Worker running at: "2025-10-20T14:54:38.3702760+03:00"
2025-10-20 14:54:38.373 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:38.378 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:38.380 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:38.383 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.385 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.389 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.391 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:38.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:38.396 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.408 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.413 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.415 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.418 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.420 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:38.423 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.426 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:38.495 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:38.500 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.502 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.504 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.506 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:38.508 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:38.510 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.517 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.521 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.524 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:38.526 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.528 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:38.530 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.532 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.534 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:38.535 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:38.556 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:38.558 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.561 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:38.582 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:38.585 +03:00 [INF] Worker running at: "2025-10-20T14:54:38.5855855+03:00"
2025-10-20 14:54:38.588 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:38.594 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:38.597 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:38.599 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.603 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.607 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.610 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:38.612 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:38.615 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.632 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.638 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.641 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.643 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.645 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:38.648 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.651 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:38.714 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:38.718 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.722 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.725 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:38.730 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:38.733 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.740 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.744 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.746 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:38.750 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.753 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:38.757 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.759 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.761 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:38.764 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:38.784 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:38.785 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.788 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:38.808 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:38.810 +03:00 [INF] Worker running at: "2025-10-20T14:54:38.8106442+03:00"
2025-10-20 14:54:38.813 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:38.816 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:38.818 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:38.821 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.823 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.825 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.827 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:38.829 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:38.831 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.846 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:38.853 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.856 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:38.857 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.859 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:38.863 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.866 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:38.932 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:38.937 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.939 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.941 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:38.943 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:38.945 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:38.947 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.951 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:38.956 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.959 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:38.962 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:38.964 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:38.966 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.968 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:38.970 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:38.972 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:38.992 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:38.997 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.001 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:39.022 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:39.027 +03:00 [INF] Worker running at: "2025-10-20T14:54:39.0275820+03:00"
2025-10-20 14:54:39.031 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:39.035 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:39.037 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:39.041 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.043 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.046 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.047 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:39.050 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:39.052 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.066 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.073 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.076 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.078 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.081 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:39.085 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.088 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:39.144 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:39.148 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.150 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.153 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:39.158 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:39.161 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.167 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.170 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.172 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:39.175 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.177 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:39.180 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.182 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.184 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:39.186 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:39.207 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:39.209 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.212 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:39.233 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:39.235 +03:00 [INF] Worker running at: "2025-10-20T14:54:39.2359854+03:00"
2025-10-20 14:54:39.239 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:39.245 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:39.247 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:39.248 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.251 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.252 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.254 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:39.256 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:39.257 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.270 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.276 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.279 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.282 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.286 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:39.294 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.299 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:39.364 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:39.368 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.371 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.374 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.377 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:39.380 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:39.383 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.390 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.393 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.395 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:39.399 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.400 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:39.403 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.406 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.407 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:39.409 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:39.428 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:39.429 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.431 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:39.451 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:39.453 +03:00 [INF] Worker running at: "2025-10-20T14:54:39.4537402+03:00"
2025-10-20 14:54:39.455 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:39.458 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:39.461 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:39.463 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.465 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.467 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.470 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:39.473 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:39.476 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.486 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.491 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.493 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.495 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.497 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:39.499 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.502 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:39.556 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:39.561 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.564 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.568 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.571 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:39.573 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:39.575 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.583 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.587 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.589 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:39.593 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.596 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:39.600 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.602 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.604 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:39.606 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:39.628 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:39.633 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.635 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:39.658 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:39.661 +03:00 [INF] Worker running at: "2025-10-20T14:54:39.6610252+03:00"
2025-10-20 14:54:39.664 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:39.670 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:39.672 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:39.677 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.680 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.682 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.684 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:39.687 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:39.691 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.706 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.711 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.714 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.717 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.720 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:39.725 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.728 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:39.792 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:39.795 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.799 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.802 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.804 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:39.806 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:39.809 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.816 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:39.820 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.821 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:39.824 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.826 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:39.829 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.832 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:39.834 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:39.836 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:39.858 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:39.860 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.864 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:39.886 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:39.892 +03:00 [INF] Worker running at: "2025-10-20T14:54:39.8921169+03:00"
2025-10-20 14:54:39.894 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:39.897 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:39.897 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:39.899 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.901 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.902 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:39.905 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:39.907 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:39.910 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.922 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:39.927 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.929 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:39.931 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.932 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:39.934 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.936 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:39.993 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:39.997 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:39.999 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.001 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:40.006 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:40.008 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.014 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.018 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.021 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:40.023 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.026 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:40.029 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.031 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.032 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:40.034 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:40.056 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:40.057 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.060 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:40.081 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:40.084 +03:00 [INF] Worker running at: "2025-10-20T14:54:40.0843576+03:00"
2025-10-20 14:54:40.088 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:40.093 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:40.095 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:40.097 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.099 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.102 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.104 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:40.107 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:40.109 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.123 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.126 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.129 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.130 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.132 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:40.134 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.136 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:40.197 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:40.202 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.206 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.210 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.212 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:40.214 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:40.217 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.223 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.230 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.233 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:40.235 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.237 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:40.241 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.243 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.244 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:40.246 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:40.265 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:40.268 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.273 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:40.299 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:40.302 +03:00 [INF] Worker running at: "2025-10-20T14:54:40.3029452+03:00"
2025-10-20 14:54:40.306 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:40.312 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:40.315 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:40.317 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.320 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.322 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.324 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:40.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:40.331 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.344 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.349 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.353 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.359 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.365 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 16ms reading results.
2025-10-20 14:54:40.369 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.374 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:40.434 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:40.440 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.445 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.450 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.453 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:40.457 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:40.460 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.471 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.478 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.483 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:40.486 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.489 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:40.493 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.496 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.500 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:40.504 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:40.528 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:40.531 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.534 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:40.553 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:40.557 +03:00 [INF] Worker running at: "2025-10-20T14:54:40.5573812+03:00"
2025-10-20 14:54:40.559 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:40.563 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:40.564 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:40.566 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.568 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.571 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.573 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:40.575 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:40.578 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.591 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.595 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.598 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.601 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.603 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:40.607 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.610 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:40.662 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:40.667 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.670 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.673 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:40.681 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:40.684 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.692 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.697 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.702 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:40.706 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.709 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:40.713 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.715 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.718 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:40.720 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:40.749 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:40.753 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.757 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:40.787 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:40.789 +03:00 [INF] Worker running at: "2025-10-20T14:54:40.7898247+03:00"
2025-10-20 14:54:40.792 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:40.796 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:40.798 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:40.800 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.802 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.804 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.806 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:40.809 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:40.812 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.826 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:40.829 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.833 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:40.837 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.839 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:40.842 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.844 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:40.898 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:40.900 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.903 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.909 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:40.910 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:40.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:40.914 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.919 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:40.926 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.928 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:40.932 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.936 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:40.939 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.941 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:40.942 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:40.944 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:40.966 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:40.970 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:40.975 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:40.998 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:41.003 +03:00 [INF] Worker running at: "2025-10-20T14:54:41.0037204+03:00"
2025-10-20 14:54:41.006 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:41.009 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:41.012 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:41.014 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.018 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.020 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.022 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:41.024 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:41.026 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.039 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.043 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.046 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.049 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.051 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:41.054 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.056 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:41.117 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:41.124 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.127 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.129 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.131 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:41.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:41.137 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.143 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.146 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.149 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:41.153 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.159 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:41.161 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.164 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.168 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:41.171 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:41.189 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:41.191 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.194 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:41.222 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:41.224 +03:00 [INF] Worker running at: "2025-10-20T14:54:41.2248166+03:00"
2025-10-20 14:54:41.228 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:41.235 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:41.238 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:41.242 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.244 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.246 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.249 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:41.252 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:41.254 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.268 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.273 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.279 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.282 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.284 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:41.287 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.289 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:41.363 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:41.370 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.377 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.384 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.388 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:41.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-10-20 14:54:41.400 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.409 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.416 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.420 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:41.424 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.427 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:41.431 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.433 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.435 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:41.437 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:41.458 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:41.460 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.462 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:41.489 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:41.494 +03:00 [INF] Worker running at: "2025-10-20T14:54:41.4941626+03:00"
2025-10-20 14:54:41.496 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:41.500 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:41.502 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:41.504 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.507 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.510 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.512 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:41.514 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:41.516 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.537 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.544 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.547 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.550 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.552 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:41.554 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.556 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:41.619 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:41.624 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.626 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.630 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.632 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:41.635 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:41.639 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.645 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.649 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.653 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:41.658 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.660 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:41.664 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.667 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.670 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:41.672 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:41.695 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:41.699 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.702 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:41.724 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:41.728 +03:00 [INF] Worker running at: "2025-10-20T14:54:41.7281491+03:00"
2025-10-20 14:54:41.733 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:41.740 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:41.742 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:41.744 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.747 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.750 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.753 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:41.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:41.760 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.772 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:41.781 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.783 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:41.785 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.787 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:41.791 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.794 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:41.857 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:41.861 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.863 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.867 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.868 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:41.872 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:41.875 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.880 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:41.884 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.888 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:41.891 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.894 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:41.896 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.899 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:41.901 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:41.902 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:41.923 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:41.925 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.927 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:41.952 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:41.956 +03:00 [INF] Worker running at: "2025-10-20T14:54:41.9562520+03:00"
2025-10-20 14:54:41.962 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:41.970 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:41.973 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:41.977 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.982 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:41.987 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:41.990 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:41.993 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:41.996 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.020 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.030 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.034 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.036 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.040 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:42.042 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.044 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:42.103 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:42.109 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.112 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.114 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:42.116 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:42.118 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:42.121 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:42.128 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:42.131 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.135 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:42.139 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.141 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:42.144 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:42.146 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:42.148 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:42.150 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:42.168 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:42.170 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.174 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:42.198 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:42.203 +03:00 [INF] Worker running at: "2025-10-20T14:54:42.2032384+03:00"
2025-10-20 14:54:42.208 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:42.212 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:42.214 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:42.216 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.220 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:42.225 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:42.228 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:42.230 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.252 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.259 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.264 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.266 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.269 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:42.272 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.274 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:42.339 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:42.344 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.349 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.356 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:42.359 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:42.363 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:42.370 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:42.377 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:42.384 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.390 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:42.393 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.396 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:42.398 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:42.400 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:42.403 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:42.405 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:42.435 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:42.438 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.444 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-10-20 14:54:42.470 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:42.475 +03:00 [INF] Worker running at: "2025-10-20T14:54:42.4753268+03:00"
2025-10-20 14:54:42.479 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:42.483 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:42.486 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:42.488 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.492 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.495 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:42.498 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:42.500 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:42.503 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.527 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.534 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.538 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.541 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.544 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:42.547 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.552 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:42.665 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:42.675 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.682 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.688 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:42.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:42.695 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:42.702 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:42.712 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:42.719 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.723 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:42.729 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.735 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:42.741 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:42.746 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:42.750 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:42.754 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:42.780 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:42.784 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
