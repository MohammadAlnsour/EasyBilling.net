2025-10-20 14:55:12.058 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.067 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (9ms).
2025-10-20 14:55:12.129 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:12.135 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.137 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.141 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.143 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:12.146 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:12.148 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.153 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.157 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.162 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:55:12.165 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.166 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:12.168 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.170 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.172 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:12.173 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:12.192 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:12.195 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.197 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:12.220 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:12.222 +03:00 [INF] Worker running at: "2025-10-20T14:55:12.2221973+03:00"
2025-10-20 14:55:12.226 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:12.230 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:12.232 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:12.233 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.236 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.238 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.241 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:12.243 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:12.245 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.258 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.263 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.266 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.268 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.271 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:12.274 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.278 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:12.342 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:12.347 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.348 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.350 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.352 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:12.354 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:12.357 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.362 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.366 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.368 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:12.371 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.374 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:12.377 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.378 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.380 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:12.383 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:12.404 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:12.406 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.409 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:12.431 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:12.435 +03:00 [INF] Worker running at: "2025-10-20T14:55:12.4353090+03:00"
2025-10-20 14:55:12.437 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:12.444 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:12.445 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:12.448 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.450 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.452 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:12.457 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:12.459 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.472 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.476 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.479 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.481 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.483 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:12.485 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.487 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:12.568 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:12.574 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.577 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.580 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.581 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:12.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:12.585 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.590 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.594 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.596 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:12.599 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.601 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:12.604 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.606 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.608 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:12.610 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:12.633 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:12.636 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.641 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:55:12.667 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:12.670 +03:00 [INF] Worker running at: "2025-10-20T14:55:12.6700744+03:00"
2025-10-20 14:55:12.674 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:12.679 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:12.681 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:12.684 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.686 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:12.695 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:12.697 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.712 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.717 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.719 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.724 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.726 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:55:12.730 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.732 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:12.788 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:12.792 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.796 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.799 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:12.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:12.806 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.812 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:12.816 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.819 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:12.823 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.827 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:12.830 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.832 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:12.834 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:12.836 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:12.857 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:12.861 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.863 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:12.884 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:12.886 +03:00 [INF] Worker running at: "2025-10-20T14:55:12.8861369+03:00"
2025-10-20 14:55:12.890 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:12.893 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:12.894 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:12.896 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.898 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.900 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:12.902 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:12.904 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:12.907 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.919 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:12.922 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.925 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:12.926 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.928 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:12.931 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.933 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:12.989 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:12.992 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:12.997 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.000 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.001 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.003 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.005 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.010 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.015 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.017 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:55:13.019 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.021 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:13.023 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.024 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.028 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:13.030 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:13.050 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:13.053 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.056 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:13.077 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:13.080 +03:00 [INF] Worker running at: "2025-10-20T14:55:13.0805333+03:00"
2025-10-20 14:55:13.083 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:13.085 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:13.087 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:13.089 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.091 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.094 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.096 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.098 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.100 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.112 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.116 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.119 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.123 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.125 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:13.127 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.129 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:13.184 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:13.187 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.191 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.193 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:13.199 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:55:13.202 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.207 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.210 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.213 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:13.216 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.218 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:13.221 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.222 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.224 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:13.226 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:13.244 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:13.247 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.249 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:13.270 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:13.274 +03:00 [INF] Worker running at: "2025-10-20T14:55:13.2743857+03:00"
2025-10-20 14:55:13.279 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:13.285 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:13.288 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:55:13.291 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.294 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.298 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.300 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:13.303 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:13.307 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.323 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.328 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.330 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.332 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.335 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:13.338 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.341 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:13.404 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:13.410 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.414 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.417 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.420 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.422 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:13.425 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.432 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.437 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.440 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:13.443 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.446 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:13.449 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.451 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.453 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:13.455 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:13.477 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:13.479 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.483 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:13.512 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:13.515 +03:00 [INF] Worker running at: "2025-10-20T14:55:13.5151649+03:00"
2025-10-20 14:55:13.518 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:13.521 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:13.522 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:13.525 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.527 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.529 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.531 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.533 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.535 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.548 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.552 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.555 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.557 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.559 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:13.562 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.563 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:13.645 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:13.649 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.651 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.654 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.655 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.657 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.660 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.665 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.668 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.671 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:13.674 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.676 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:13.678 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.680 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.682 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:13.684 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:13.707 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:13.709 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.711 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:13.732 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:13.734 +03:00 [INF] Worker running at: "2025-10-20T14:55:13.7348564+03:00"
2025-10-20 14:55:13.736 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:13.741 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:13.743 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:13.744 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.747 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.749 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.750 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.752 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.755 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.768 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.771 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.773 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.776 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.780 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:13.783 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.786 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:13.838 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:13.843 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.846 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.848 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.850 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.852 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:13.855 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.862 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:13.864 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.867 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:13.869 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.871 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:13.875 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.877 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:13.879 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:13.880 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:13.898 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:13.902 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.904 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:13.923 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:13.928 +03:00 [INF] Worker running at: "2025-10-20T14:55:13.9281012+03:00"
2025-10-20 14:55:13.930 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:13.934 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:13.935 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:13.938 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.940 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.942 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:13.944 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:13.947 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:13.949 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.962 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:13.967 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.969 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:13.974 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.977 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:55:13.980 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:13.983 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.039 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:14.044 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.047 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.049 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.050 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.052 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.055 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.062 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.067 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.069 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:14.071 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.074 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.077 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.078 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.080 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:14.082 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:14.100 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:14.101 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.104 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:14.132 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:14.137 +03:00 [INF] Worker running at: "2025-10-20T14:55:14.1376016+03:00"
2025-10-20 14:55:14.140 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:14.143 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:14.144 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:14.146 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.150 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.152 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.153 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.157 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.170 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.175 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.177 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.180 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.183 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:14.185 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.189 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:14.244 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:14.247 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.249 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.251 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.253 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.255 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.257 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.261 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.265 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.267 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:14.269 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.271 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.274 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.276 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.277 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:14.279 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:14.304 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:14.308 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.311 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:14.332 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:14.334 +03:00 [INF] Worker running at: "2025-10-20T14:55:14.3340265+03:00"
2025-10-20 14:55:14.336 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:14.340 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:14.341 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:14.344 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.346 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.348 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.350 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.352 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:14.354 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.367 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.371 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.373 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.376 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.378 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:14.380 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.384 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:14.440 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:14.444 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.447 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.448 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.450 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.452 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.454 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.459 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.462 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.464 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:14.467 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.469 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:14.472 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.473 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.475 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:14.476 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:14.495 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:14.498 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.500 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:14.520 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:14.524 +03:00 [INF] Worker running at: "2025-10-20T14:55:14.5243153+03:00"
2025-10-20 14:55:14.526 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:14.529 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:14.530 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:14.532 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.534 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.536 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.538 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.540 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.541 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.553 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.557 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.560 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.562 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.565 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:14.568 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.570 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.619 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:14.622 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.624 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.626 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.627 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.630 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.632 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.637 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.641 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.643 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:14.646 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.648 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.651 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.652 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.653 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:14.655 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:14.676 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:14.679 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.681 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:14.702 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:14.704 +03:00 [INF] Worker running at: "2025-10-20T14:55:14.7048237+03:00"
2025-10-20 14:55:14.709 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:14.712 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:14.714 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:14.716 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.718 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.721 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.723 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:14.725 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:14.728 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.741 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.745 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.748 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.750 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.752 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:14.756 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.758 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.816 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:14.822 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.826 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.828 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.830 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:14.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:14.835 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.841 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:14.845 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.849 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:14.852 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.855 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:14.859 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.860 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:14.862 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:14.865 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:14.884 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:14.887 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.889 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:14.909 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:14.912 +03:00 [INF] Worker running at: "2025-10-20T14:55:14.9128619+03:00"
2025-10-20 14:55:14.915 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:14.918 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:14.919 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:14.923 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.925 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.927 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:14.929 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:14.931 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:14.933 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.945 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:14.949 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.952 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:14.954 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.957 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:14.960 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:14.963 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.014 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:15.017 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.020 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.021 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.025 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:15.027 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:15.028 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.034 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.037 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.039 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:15.041 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.044 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.047 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.048 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.050 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:15.052 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:15.071 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:15.074 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.077 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:15.098 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:15.101 +03:00 [INF] Worker running at: "2025-10-20T14:55:15.1018328+03:00"
2025-10-20 14:55:15.104 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:15.108 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:15.109 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:15.111 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.114 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.117 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.118 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:15.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:15.123 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.136 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.142 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.144 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.146 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.149 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:15.152 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.154 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.222 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:15.224 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.226 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.230 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:15.232 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:15.234 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.240 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.243 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.245 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:15.248 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.251 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:15.254 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.256 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.258 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:15.259 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:15.282 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:15.284 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.286 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:15.307 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:15.310 +03:00 [INF] Worker running at: "2025-10-20T14:55:15.3107709+03:00"
2025-10-20 14:55:15.313 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:15.316 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:15.317 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:15.319 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.321 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.323 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.324 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:15.326 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:15.329 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.343 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.348 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.351 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.354 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.356 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:15.361 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.363 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.418 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:15.420 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.425 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.427 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.429 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:15.431 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:15.433 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.438 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.441 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.445 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:15.448 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.450 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.453 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.454 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.456 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:15.458 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:15.475 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:15.478 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.480 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:15.502 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:15.506 +03:00 [INF] Worker running at: "2025-10-20T14:55:15.5061307+03:00"
2025-10-20 14:55:15.508 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:15.512 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:15.513 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:15.516 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.518 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.520 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.523 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:15.525 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:15.527 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.540 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.544 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.546 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.548 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.552 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:15.554 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.557 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.613 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:15.616 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.618 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.620 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.625 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:15.626 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:55:15.628 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.633 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.636 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.640 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:15.643 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.645 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.648 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.650 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.654 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:15.656 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:15.674 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:15.678 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.680 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:15.711 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:15.713 +03:00 [INF] Worker running at: "2025-10-20T14:55:15.7135011+03:00"
2025-10-20 14:55:15.715 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:15.719 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:15.721 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:15.722 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.725 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.727 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.728 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:15.730 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:15.733 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.746 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.750 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.753 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.755 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.757 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:15.760 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.762 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.815 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:15.820 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.824 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.828 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.830 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:15.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:15.834 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.840 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:15.845 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.847 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:15.850 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.852 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:15.855 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.857 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:15.860 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:15.862 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:15.881 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:15.882 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.884 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:15.907 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:15.909 +03:00 [INF] Worker running at: "2025-10-20T14:55:15.9099145+03:00"
2025-10-20 14:55:15.912 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:15.915 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:15.917 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:15.919 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.921 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.926 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:15.928 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:15.931 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:15.934 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.947 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:15.951 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.953 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:15.955 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.957 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:15.960 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:15.962 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.031 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:16.034 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.036 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.039 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.040 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.042 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.045 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.051 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.056 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.058 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:16.063 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.065 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.068 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.069 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.071 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:16.073 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:16.095 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:16.097 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.099 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:16.122 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:16.124 +03:00 [INF] Worker running at: "2025-10-20T14:55:16.1249698+03:00"
2025-10-20 14:55:16.127 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:16.131 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:16.132 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:16.134 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.136 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.138 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.141 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.143 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:16.145 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.156 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.161 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.163 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.165 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.168 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:16.170 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.172 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.228 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:16.231 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.233 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.236 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.237 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.239 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.241 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.246 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.250 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.252 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:55:16.255 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.257 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.259 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.263 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.264 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:16.266 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:16.283 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:16.285 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.288 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:16.307 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:16.311 +03:00 [INF] Worker running at: "2025-10-20T14:55:16.3113228+03:00"
2025-10-20 14:55:16.314 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:16.318 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:16.319 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:16.322 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.324 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.326 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.328 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.330 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.332 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.345 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.349 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.351 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.355 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.358 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:16.361 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.363 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.414 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:16.419 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.421 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.424 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.426 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.429 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.434 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.438 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.440 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:16.442 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.444 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.447 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.450 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.452 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:16.454 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:16.473 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:16.476 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.478 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:16.498 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:16.500 +03:00 [INF] Worker running at: "2025-10-20T14:55:16.5003379+03:00"
2025-10-20 14:55:16.503 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:16.507 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:16.508 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:16.510 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.513 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.515 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.517 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.518 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.520 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.533 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.539 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.543 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.545 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.547 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:16.549 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.551 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.617 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:16.624 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.626 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.630 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:16.636 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.643 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.647 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.650 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:16.653 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.656 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.658 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.660 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.661 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:16.663 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:16.686 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:16.690 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.693 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:16.715 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:16.719 +03:00 [INF] Worker running at: "2025-10-20T14:55:16.7194490+03:00"
2025-10-20 14:55:16.722 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:16.726 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:16.727 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:16.729 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.731 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:16.738 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:16.740 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.754 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.759 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.762 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:16.765 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.767 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:16.770 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.772 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.849 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:16.855 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.859 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.862 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.865 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:16.868 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:16.870 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.877 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:16.880 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.883 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:16.886 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.889 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:16.892 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.893 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:16.894 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:16.896 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:16.917 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:16.920 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.923 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:16.942 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:16.947 +03:00 [INF] Worker running at: "2025-10-20T14:55:16.9475183+03:00"
2025-10-20 14:55:16.951 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:16.957 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:16.960 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:55:16.963 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.966 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:16.969 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:16.971 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:16.974 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:16.976 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:16.998 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.003 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.009 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.012 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.014 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:55:17.017 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.020 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.085 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:17.090 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.092 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.096 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.099 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:55:17.107 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.112 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.115 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.119 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:17.123 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.126 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:17.129 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.132 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.134 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:17.135 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:17.158 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:17.161 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.165 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:17.188 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:17.193 +03:00 [INF] Worker running at: "2025-10-20T14:55:17.1935138+03:00"
2025-10-20 14:55:17.195 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:17.199 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:17.200 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:17.202 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.204 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.206 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.208 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.212 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:17.214 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.228 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.231 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.234 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.236 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.238 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:17.241 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.243 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.304 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:17.307 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.310 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.313 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.314 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.316 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.319 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.325 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.328 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.330 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:17.333 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.336 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.339 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.342 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.344 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:17.345 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:17.372 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:17.378 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.381 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:17.406 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:17.409 +03:00 [INF] Worker running at: "2025-10-20T14:55:17.4095533+03:00"
2025-10-20 14:55:17.411 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:17.417 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:17.418 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:17.419 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.422 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.424 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.426 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.428 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.431 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.445 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.448 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.450 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.452 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.455 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:17.458 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.460 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.508 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:17.512 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.515 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.517 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.519 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:17.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:17.526 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.531 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.536 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.538 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:17.542 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.544 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.548 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.550 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.552 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:17.553 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:17.570 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:17.573 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.575 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:17.593 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:17.595 +03:00 [INF] Worker running at: "2025-10-20T14:55:17.5958720+03:00"
2025-10-20 14:55:17.598 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:17.601 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:17.603 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:17.604 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.606 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.608 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.609 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.611 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.613 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.627 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.630 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.632 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.634 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.636 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:17.639 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.642 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.696 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:17.701 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.703 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.705 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.706 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.708 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.711 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.716 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.721 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.724 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:17.726 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.729 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.731 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.733 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.734 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:17.736 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:17.753 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:17.755 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.757 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:17.779 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:17.781 +03:00 [INF] Worker running at: "2025-10-20T14:55:17.7815637+03:00"
2025-10-20 14:55:17.783 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:17.786 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:17.788 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:55:17.790 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.792 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.794 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.796 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.798 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.800 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.814 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:17.818 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.820 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:17.824 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.826 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:17.828 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.831 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.881 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:17.884 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.887 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.891 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.892 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.897 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:17.899 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.905 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:17.909 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.911 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:17.914 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.916 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:17.919 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.921 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:17.923 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:17.925 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:17.943 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:17.945 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.947 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:17.966 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:17.969 +03:00 [INF] Worker running at: "2025-10-20T14:55:17.9696616+03:00"
2025-10-20 14:55:17.973 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:17.978 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:17.980 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:55:17.982 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.984 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:17.987 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:17.988 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:17.990 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:17.992 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.005 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.009 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.012 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.014 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.016 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:18.019 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.021 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:18.079 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:18.083 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.086 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.089 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.091 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:18.093 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:18.095 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.100 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.103 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.105 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:18.108 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.112 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:18.114 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.116 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.118 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:18.120 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:18.137 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:18.140 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.143 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:18.163 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:18.166 +03:00 [INF] Worker running at: "2025-10-20T14:55:18.1666288+03:00"
2025-10-20 14:55:18.169 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:18.172 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:18.176 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:55:18.178 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.180 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.182 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.184 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:18.186 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:18.188 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.202 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.208 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.211 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.214 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.218 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:55:18.222 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.226 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:55:18.308 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:18.314 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.317 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.319 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.322 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:18.325 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:18.327 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.333 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.337 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.340 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:18.343 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.346 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:18.349 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.351 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.353 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:18.354 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:18.381 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:18.383 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.386 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:18.416 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:18.418 +03:00 [INF] Worker running at: "2025-10-20T14:55:18.4189145+03:00"
2025-10-20 14:55:18.421 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:18.424 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:18.426 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:18.427 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.430 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.432 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:18.436 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:18.438 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.460 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.463 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.467 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.469 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.471 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:18.474 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.476 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:18.547 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:18.551 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.553 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.555 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.557 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:18.559 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:18.563 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.567 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.570 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.574 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:18.577 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.579 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:18.582 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.584 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.586 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:18.587 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:18.617 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:18.621 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.624 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:18.648 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:18.650 +03:00 [INF] Worker running at: "2025-10-20T14:55:18.6505071+03:00"
2025-10-20 14:55:18.652 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:18.659 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:18.660 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:18.662 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.665 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.667 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.669 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:18.671 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:18.673 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.686 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.692 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.695 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.697 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.699 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:18.703 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.706 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:18.765 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:18.769 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.772 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.774 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.776 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:18.779 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:18.781 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.786 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.789 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.791 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:18.795 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.797 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:18.799 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.801 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.803 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:18.804 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:18.821 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:18.822 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.826 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:18.843 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:18.847 +03:00 [INF] Worker running at: "2025-10-20T14:55:18.8478882+03:00"
2025-10-20 14:55:18.850 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:18.855 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:18.857 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:18.859 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.863 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:18.868 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:18.871 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.883 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:18.887 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.890 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:18.893 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.895 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:18.898 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.900 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:18.950 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:18.954 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.959 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.962 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:18.965 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:18.967 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:18.969 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.976 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:18.981 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.983 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:18.985 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:18.988 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:18.990 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.992 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:18.994 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:18.996 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:19.024 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:19.028 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.031 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:19.059 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:19.063 +03:00 [INF] Worker running at: "2025-10-20T14:55:19.0638492+03:00"
2025-10-20 14:55:19.067 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:19.073 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:19.075 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:19.077 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.080 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.082 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.085 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:19.088 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:19.090 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.104 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.110 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.113 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.116 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.120 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:55:19.123 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.126 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:19.193 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:19.197 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.200 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.202 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.204 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:19.206 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:19.209 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.215 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.219 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.221 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:19.223 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.226 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:19.229 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.231 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.232 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:19.234 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:19.254 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:19.259 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.262 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:19.285 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:19.289 +03:00 [INF] Worker running at: "2025-10-20T14:55:19.2891899+03:00"
2025-10-20 14:55:19.292 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:19.298 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:19.300 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:55:19.302 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.304 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.307 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.309 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:19.311 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:19.314 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.328 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.334 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.337 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.339 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.341 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:19.344 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.346 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:19.426 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:19.431 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.433 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.436 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.437 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:19.439 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:19.441 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.446 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.449 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.452 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:19.454 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.457 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:19.460 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.463 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.464 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:19.466 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:19.492 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:19.495 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.497 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:19.519 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:19.522 +03:00 [INF] Worker running at: "2025-10-20T14:55:19.5221514+03:00"
2025-10-20 14:55:19.525 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:19.528 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:19.529 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:19.531 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.533 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.535 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.537 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:19.540 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:19.544 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.555 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.559 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.562 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.564 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.566 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:19.568 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.572 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:19.623 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:19.625 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.629 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.632 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.634 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:19.636 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:19.638 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.644 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.649 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.651 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:19.654 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.656 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:19.658 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.660 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.662 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:19.664 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:19.689 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:19.693 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.696 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:19.716 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:19.718 +03:00 [INF] Worker running at: "2025-10-20T14:55:19.7189956+03:00"
2025-10-20 14:55:19.722 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:19.726 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:19.727 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:19.729 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.730 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.732 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.734 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:19.736 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:19.738 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.749 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.753 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.757 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.760 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.762 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:19.764 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.766 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:19.823 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:19.827 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.830 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.833 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.835 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:19.837 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:19.839 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.845 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:19.849 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.851 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:19.853 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.855 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:19.857 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.859 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:19.861 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:19.862 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:19.881 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:19.883 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.885 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:19.907 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:19.910 +03:00 [INF] Worker running at: "2025-10-20T14:55:19.9103373+03:00"
2025-10-20 14:55:19.912 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:19.915 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:19.916 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:19.918 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.920 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.922 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:19.924 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:19.926 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:19.928 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.939 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:19.943 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.946 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:19.948 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.951 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:19.953 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:19.956 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:20.009 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:20.012 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.014 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.016 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.018 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.020 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:20.023 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.027 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.031 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.035 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:55:20.037 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.039 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:20.042 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.043 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.045 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:20.047 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:20.079 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:20.083 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.085 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:20.120 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:20.123 +03:00 [INF] Worker running at: "2025-10-20T14:55:20.1233196+03:00"
2025-10-20 14:55:20.125 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:20.128 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:20.130 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:20.131 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.133 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.135 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.139 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:20.140 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.151 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.154 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.157 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.159 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.162 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:20.164 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.166 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:20.255 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:20.259 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.262 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.264 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.266 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.267 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:20.270 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.275 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.278 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.282 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:55:20.284 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.286 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:20.288 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.290 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.291 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:20.293 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:20.331 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:20.335 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.338 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:20.366 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:20.372 +03:00 [INF] Worker running at: "2025-10-20T14:55:20.3720709+03:00"
2025-10-20 14:55:20.376 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:20.380 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:20.381 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:20.383 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.385 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.387 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.389 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.393 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:20.395 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.421 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.428 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.431 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.433 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.436 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:20.440 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.442 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:20.533 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:20.535 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.537 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.539 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.541 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.543 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:20.545 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.551 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.554 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.557 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:20.559 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.561 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:20.564 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.566 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.568 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:20.569 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:20.597 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:20.599 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.603 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:55:20.638 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:20.642 +03:00 [INF] Worker running at: "2025-10-20T14:55:20.6428438+03:00"
2025-10-20 14:55:20.645 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:20.648 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:20.650 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:55:20.652 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.654 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.658 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.659 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.662 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:20.664 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.687 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.694 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.696 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.698 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.700 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:20.703 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.706 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:20.799 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:20.801 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.804 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.807 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.809 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:20.811 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:20.813 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.817 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:20.820 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.822 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:20.825 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.827 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:20.830 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.831 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:20.832 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:20.834 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:20.863 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:20.865 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.867 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:20.900 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:20.902 +03:00 [INF] Worker running at: "2025-10-20T14:55:20.9023973+03:00"
2025-10-20 14:55:20.904 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:20.908 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:20.910 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:55:20.912 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.914 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.916 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:20.918 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:20.920 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:20.922 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.944 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:20.948 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.952 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:20.954 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.957 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:55:20.960 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:20.962 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:21.029 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:21.033 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.037 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.040 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.042 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:21.044 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.046 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.051 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.054 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.056 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:21.059 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.061 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:21.063 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.065 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.067 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:21.069 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:21.087 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:21.092 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.096 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:55:21.117 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:21.119 +03:00 [INF] Worker running at: "2025-10-20T14:55:21.1194477+03:00"
2025-10-20 14:55:21.121 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:21.124 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:21.126 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:21.129 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.131 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.133 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.135 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:21.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.139 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.151 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.156 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.160 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.162 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.164 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:21.167 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.169 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:21.227 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:21.230 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.232 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.234 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.235 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:21.238 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.241 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.246 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.250 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.252 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:21.254 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.257 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:21.260 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.261 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.263 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:21.265 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:21.283 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:21.286 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.289 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:21.309 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:21.313 +03:00 [INF] Worker running at: "2025-10-20T14:55:21.3137183+03:00"
2025-10-20 14:55:21.316 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:21.321 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:21.322 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:21.325 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.327 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.330 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.332 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:21.334 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.336 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.348 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.353 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.355 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.357 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.360 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:21.362 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.365 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:21.425 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:21.430 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.432 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.436 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:21.438 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.440 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.445 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.448 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.451 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:21.453 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.455 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:21.459 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.461 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.463 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:21.464 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:21.483 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:21.485 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.487 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:21.505 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:21.508 +03:00 [INF] Worker running at: "2025-10-20T14:55:21.5086456+03:00"
2025-10-20 14:55:21.511 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:21.515 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:21.516 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:21.518 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.521 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.523 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.524 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:21.526 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:21.528 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.541 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.545 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.547 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.550 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.552 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:21.555 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.556 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:21.611 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:21.615 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.617 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.619 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.621 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:21.623 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:21.628 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.633 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.636 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.639 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:21.641 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.644 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:21.646 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.648 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.650 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:21.651 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:21.670 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:21.671 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.674 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:21.694 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:21.697 +03:00 [INF] Worker running at: "2025-10-20T14:55:21.6972002+03:00"
2025-10-20 14:55:21.700 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:21.703 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:21.704 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:21.706 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.708 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.711 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.713 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:21.715 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.717 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.730 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.734 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.735 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.739 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.742 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:21.747 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.750 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:21.808 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:21.811 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.813 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.815 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.819 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:21.821 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:55:21.823 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.828 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:21.832 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.834 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:21.837 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.839 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:21.842 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.844 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:21.845 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:21.847 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:21.866 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:21.868 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.870 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:21.889 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:21.893 +03:00 [INF] Worker running at: "2025-10-20T14:55:21.8932237+03:00"
2025-10-20 14:55:21.896 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:21.899 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:21.901 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:21.903 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.905 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.907 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:21.910 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:21.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:21.914 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.928 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:21.933 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.934 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:21.936 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.938 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:55:21.941 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:21.945 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:22.003 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:22.007 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.009 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.013 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.015 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:22.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:22.020 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.025 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.030 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.033 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:22.035 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.037 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.041 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.042 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.044 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:22.046 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:22.066 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:22.069 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.074 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:55:22.095 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:22.098 +03:00 [INF] Worker running at: "2025-10-20T14:55:22.0989241+03:00"
2025-10-20 14:55:22.101 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:22.104 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:22.105 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:22.108 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.112 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.114 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.116 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:22.118 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:22.120 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.135 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.141 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.144 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.147 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.149 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:22.152 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.154 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.209 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:22.213 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.215 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:22.222 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:22.224 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.229 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.233 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.235 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:22.240 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.242 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.245 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.247 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.249 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:22.250 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:22.268 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:22.271 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.273 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:22.296 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:22.299 +03:00 [INF] Worker running at: "2025-10-20T14:55:22.2990698+03:00"
2025-10-20 14:55:22.301 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:22.304 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:22.305 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:22.307 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.309 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.311 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.327 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2025-10-20 14:55:22.330 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-10-20 14:55:22.334 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.349 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.353 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.355 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.357 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.360 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:22.363 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.365 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.428 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:22.431 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.433 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.436 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.438 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:22.441 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:22.444 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.449 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.457 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.460 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:22.462 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.464 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.467 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.470 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.472 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:22.473 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:22.490 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:22.492 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.495 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:22.525 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:22.527 +03:00 [INF] Worker running at: "2025-10-20T14:55:22.5276910+03:00"
2025-10-20 14:55:22.531 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:22.535 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:22.537 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:22.539 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.542 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.545 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.548 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:22.550 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:22.552 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.565 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.569 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.571 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.573 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.576 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:22.579 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.581 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.634 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:22.640 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.642 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.644 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.645 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:22.648 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:22.649 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.654 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.659 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.661 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:22.664 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.666 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.669 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.671 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.673 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:22.675 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:22.704 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:22.706 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.710 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:22.730 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:22.734 +03:00 [INF] Worker running at: "2025-10-20T14:55:22.7344040+03:00"
2025-10-20 14:55:22.736 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:22.739 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:22.741 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:22.742 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.744 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.747 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.749 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:22.751 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:22.753 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.765 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.770 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.773 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.775 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.778 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:22.781 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.783 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.832 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:22.838 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.841 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.844 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.845 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:22.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:22.849 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.855 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:22.859 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.861 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:22.863 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.865 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:22.867 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.869 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:22.872 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:22.873 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:22.894 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:22.896 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.900 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:22.920 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:22.923 +03:00 [INF] Worker running at: "2025-10-20T14:55:22.9238418+03:00"
2025-10-20 14:55:22.925 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:22.930 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:22.931 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:22.933 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.936 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.939 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:22.941 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:22.944 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:22.946 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.961 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:22.964 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.967 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:22.970 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.973 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:22.976 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:22.978 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.046 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:23.049 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.051 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.054 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.056 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:23.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:23.062 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.068 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.072 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.074 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:23.077 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.079 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.082 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.084 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.085 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:23.087 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:23.111 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:23.114 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.116 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:23.141 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:23.143 +03:00 [INF] Worker running at: "2025-10-20T14:55:23.1436568+03:00"
2025-10-20 14:55:23.145 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:23.148 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:23.150 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:23.153 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.156 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.158 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.161 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:23.163 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:23.165 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.176 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.180 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.182 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.184 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.187 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:23.190 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.193 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.262 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:23.266 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.270 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.272 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.274 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:23.276 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:23.278 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.284 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.288 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.291 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:23.294 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.297 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.300 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.301 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.303 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:23.305 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:23.326 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:23.330 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.332 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:23.359 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:23.363 +03:00 [INF] Worker running at: "2025-10-20T14:55:23.3635271+03:00"
2025-10-20 14:55:23.367 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:23.370 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:23.372 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:23.375 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.378 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.380 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:23.384 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:23.386 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.401 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.407 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.409 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.412 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.414 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:23.417 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.420 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:23.496 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:23.499 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.501 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.503 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.506 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:23.508 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:23.511 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.519 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.524 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.527 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:23.531 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.534 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:55:23.539 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.542 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.545 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:23.547 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:23.569 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:23.571 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.575 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:23.598 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:23.601 +03:00 [INF] Worker running at: "2025-10-20T14:55:23.6012633+03:00"
2025-10-20 14:55:23.604 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:23.609 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:23.611 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:23.613 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.615 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.617 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.619 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:23.621 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:23.624 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.636 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.641 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.643 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.645 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.647 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:23.650 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.652 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.720 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:23.725 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.729 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.731 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.733 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:23.734 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:23.736 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.741 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.746 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.749 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:23.751 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.754 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.756 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.758 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.760 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:23.761 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:23.787 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:23.792 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.794 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:23.814 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:23.816 +03:00 [INF] Worker running at: "2025-10-20T14:55:23.8167593+03:00"
2025-10-20 14:55:23.819 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:23.823 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:23.824 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:23.828 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.830 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.833 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.834 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:23.836 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:23.839 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.849 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:23.854 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.858 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:23.861 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.864 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:55:23.867 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.869 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.919 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:23.925 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.927 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.930 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:23.931 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:23.934 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:23.936 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.941 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:23.944 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.946 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:23.949 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.951 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:23.954 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.955 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:23.958 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:23.960 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:23.979 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:23.981 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:23.984 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:24.004 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:24.007 +03:00 [INF] Worker running at: "2025-10-20T14:55:24.0077185+03:00"
2025-10-20 14:55:24.011 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:24.015 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:24.016 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:24.018 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.020 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.024 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.028 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.039 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.043 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.046 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.049 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.051 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:55:24.054 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.056 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:24.118 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:24.126 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.128 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.130 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.135 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:55:24.139 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:55:24.142 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.147 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.151 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.155 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:55:24.158 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.160 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:24.163 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.165 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.166 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:24.168 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:24.186 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:24.188 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.192 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:55:24.211 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:24.213 +03:00 [INF] Worker running at: "2025-10-20T14:55:24.2137905+03:00"
2025-10-20 14:55:24.216 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:24.219 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:24.220 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:24.222 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.224 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.226 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.227 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.230 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.241 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.245 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.249 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.250 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.253 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:24.256 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.258 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:24.313 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:24.316 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.317 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.320 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.321 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.323 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.326 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.330 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.333 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.334 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:55:24.336 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.339 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:24.341 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.342 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.344 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:24.346 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:24.363 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:24.365 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.367 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:24.384 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:24.387 +03:00 [INF] Worker running at: "2025-10-20T14:55:24.3870075+03:00"
2025-10-20 14:55:24.388 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:24.391 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:24.393 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:24.395 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.397 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.403 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.405 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.417 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.420 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.424 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.426 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.428 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:55:24.430 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.432 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:24.477 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:24.479 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.481 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.483 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.485 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:55:24.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:55:24.489 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.493 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.496 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.498 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:55:24.500 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.502 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:24.504 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.506 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.507 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:24.509 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:24.525 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:24.527 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.529 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:24.549 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:24.551 +03:00 [INF] Worker running at: "2025-10-20T14:55:24.5514689+03:00"
2025-10-20 14:55:24.554 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:24.557 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:24.559 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:24.560 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.562 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.564 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.565 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.567 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.569 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.580 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.585 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.587 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.590 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.592 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:55:24.594 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.596 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:24.647 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:24.650 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.652 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.653 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.654 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.656 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.658 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.663 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.667 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.669 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:55:24.671 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.673 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:55:24.675 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.677 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.678 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:24.679 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:24.695 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:24.697 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.698 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:55:24.717 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:55:24.719 +03:00 [INF] Worker running at: "2025-10-20T14:55:24.7193565+03:00"
2025-10-20 14:55:24.721 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:55:24.724 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:55:24.725 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:55:24.727 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.729 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.730 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.734 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.736 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.748 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:55:24.751 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.753 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:55:24.754 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.756 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:55:24.759 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.761 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:24.816 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:55:24.818 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.820 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.823 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:55:24.825 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:55:24.826 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:55:24.828 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.833 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:55:24.837 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.839 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:55:24.841 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.843 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:55:24.845 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.847 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:55:24.848 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:55:24.849 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:55:24.866 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:55:24.868 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:55:24.870 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:55:24.887 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
