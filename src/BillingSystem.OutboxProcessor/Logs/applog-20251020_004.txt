2025-10-20 14:54:42.788 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:42.830 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:42.835 +03:00 [INF] Worker running at: "2025-10-20T14:54:42.8359876+03:00"
2025-10-20 14:54:42.839 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:42.843 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:42.844 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:42.846 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.848 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:42.853 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:42.858 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:42.864 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.885 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:42.894 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.896 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:42.898 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.901 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:42.904 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.906 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:42.978 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:42.988 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.995 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:42.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:43.009 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-10-20 14:54:43.014 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.021 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.027 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.029 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:43.032 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.035 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:43.039 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.042 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.043 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:43.045 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:43.064 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:43.065 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.068 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:43.097 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:43.102 +03:00 [INF] Worker running at: "2025-10-20T14:54:43.1021007+03:00"
2025-10-20 14:54:43.106 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:43.110 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:43.112 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:43.114 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.117 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.120 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.123 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:43.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:43.127 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.139 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.142 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.147 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.150 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.153 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:43.158 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.159 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:43.215 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:43.219 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.222 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.225 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.227 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:43.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:43.231 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.236 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.240 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.242 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:43.245 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.247 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:43.250 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.251 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.253 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:43.255 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:43.274 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:43.275 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.277 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:43.295 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:43.298 +03:00 [INF] Worker running at: "2025-10-20T14:54:43.2980244+03:00"
2025-10-20 14:54:43.300 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:43.304 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:43.306 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:43.307 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.309 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.310 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.312 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:43.315 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:43.318 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.331 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.336 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.339 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.342 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.344 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:43.346 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.349 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:43.399 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:43.405 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.410 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.414 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.417 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:43.421 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:43.425 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.434 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.443 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.449 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:43.455 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.460 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:43.465 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.469 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.473 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:43.475 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:43.508 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:43.514 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.517 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:43.550 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:43.555 +03:00 [INF] Worker running at: "2025-10-20T14:54:43.5553610+03:00"
2025-10-20 14:54:43.559 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:43.564 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:43.566 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:43.567 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.570 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.573 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.575 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:43.578 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:43.582 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.603 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.607 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.612 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.614 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.616 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:43.618 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.620 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:43.693 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:43.698 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.701 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.703 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.705 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:43.711 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:43.713 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.720 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.727 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.730 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:43.735 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.737 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:43.741 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.743 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:43.745 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:43.747 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:43.770 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:43.773 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.776 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:43.797 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:43.801 +03:00 [INF] Worker running at: "2025-10-20T14:54:43.8018728+03:00"
2025-10-20 14:54:43.805 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:43.810 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:43.813 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:43.817 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.819 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.823 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.825 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:43.828 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:43.832 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.849 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:43.858 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.862 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:43.865 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.869 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:43.872 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.876 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:43.979 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:43.982 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.984 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:43.986 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:43.988 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:43.990 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:43.993 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:43.999 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.003 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.005 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:44.008 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.010 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:44.012 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.014 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.016 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:44.018 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:44.038 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:44.041 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.044 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:44.068 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:44.071 +03:00 [INF] Worker running at: "2025-10-20T14:54:44.0714047+03:00"
2025-10-20 14:54:44.074 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:44.078 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:44.080 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:44.082 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.085 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.087 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:44.091 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:44.094 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:44.118 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:44.123 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:44.127 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:44.130 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.135 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:44.138 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.141 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:44.214 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:44.220 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.224 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.231 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:44.235 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:44.242 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.249 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.258 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.262 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:44.267 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.270 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:44.275 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.277 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.279 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:44.282 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:44.312 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:44.316 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.323 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-10-20 14:54:44.360 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:44.363 +03:00 [INF] Worker running at: "2025-10-20T14:54:44.3631993+03:00"
2025-10-20 14:54:44.367 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:44.372 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:44.374 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:44.376 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.378 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.380 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:44.384 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:44.387 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:44.411 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:44.422 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:44.427 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:44.430 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.433 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:44.436 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.439 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:44.511 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:44.515 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.518 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.520 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.524 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:44.528 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:44.530 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.537 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.542 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.545 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:44.548 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.550 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:44.555 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.558 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.561 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:44.564 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:44.590 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:44.593 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.595 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:44.619 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:44.621 +03:00 [INF] Worker running at: "2025-10-20T14:54:44.6215842+03:00"
2025-10-20 14:54:44.626 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:44.632 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:44.634 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:44.638 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.640 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.643 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.647 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:44.649 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:44.652 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:44.668 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:44.675 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:44.681 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:44.684 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.687 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:44.692 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.695 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:44.802 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:44.808 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.811 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.817 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.819 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:44.822 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:44.826 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.835 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:44.843 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.852 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:44.862 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.868 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (6ms).
2025-10-20 14:54:44.874 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.877 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:44.880 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:44.884 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:44.911 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:44.916 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.918 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:44.953 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:44.960 +03:00 [INF] Worker running at: "2025-10-20T14:54:44.9606111+03:00"
2025-10-20 14:54:44.966 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:44.975 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:44.976 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:44.981 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.984 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:44.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:44.994 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:44.998 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:45.003 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:45.034 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:45.044 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:45.047 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:45.051 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.055 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:45.059 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.063 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:45.139 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:45.144 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.147 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.149 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:45.152 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:45.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:45.158 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:45.165 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:45.172 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.174 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:45.179 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.183 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:45.187 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:45.189 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:45.191 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:45.194 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:45.224 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:45.228 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.233 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:45.279 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:45.282 +03:00 [INF] Worker running at: "2025-10-20T14:54:45.2825849+03:00"
2025-10-20 14:54:45.284 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:45.291 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:45.292 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:45.294 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.298 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:45.302 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:45.304 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:45.306 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:45.322 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:45.330 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:45.334 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:45.337 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.340 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:45.345 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.348 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:45.424 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:45.427 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.429 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.431 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:45.432 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:45.435 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:45.438 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:45.444 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:45.448 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.452 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:45.456 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.460 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:45.463 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:45.465 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:45.467 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:45.486 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:45.608 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:45.627 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.664 +03:00 [DBG] Disposed connection to database '' on server '' (37ms).
2025-10-20 14:54:45.706 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:45.708 +03:00 [INF] Worker running at: "2025-10-20T14:54:45.7084500+03:00"
2025-10-20 14:54:45.710 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:45.712 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:45.714 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:45.716 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.718 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.720 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:45.722 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:45.725 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:45.726 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:45.750 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:45.755 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:45.757 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:45.759 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.762 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:45.767 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.770 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:45.829 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:45.832 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.834 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.837 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:45.838 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:45.841 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:45.843 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:45.849 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:45.862 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.868 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:45.870 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.873 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:45.876 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:45.878 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:45.896 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:45.898 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:45.923 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:45.925 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.927 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:45.947 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:45.949 +03:00 [INF] Worker running at: "2025-10-20T14:54:45.9492777+03:00"
2025-10-20 14:54:45.951 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:45.954 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:45.955 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:45.957 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.959 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:45.961 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:45.962 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:45.964 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:45.988 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.003 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.006 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.009 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.010 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.012 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:46.015 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.016 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:46.091 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:46.093 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.095 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.098 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.100 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:46.102 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:46.103 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.110 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.114 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.117 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:46.120 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.123 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:46.126 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.127 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.128 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:46.130 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:46.154 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:46.157 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.159 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:46.186 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:46.190 +03:00 [INF] Worker running at: "2025-10-20T14:54:46.1900313+03:00"
2025-10-20 14:54:46.192 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:46.196 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:46.198 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:46.200 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.202 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.207 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:46.210 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:46.212 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.226 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.230 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.233 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.235 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.237 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:46.241 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.243 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:46.315 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:46.318 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.320 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.323 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.325 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:46.328 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:46.331 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.338 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.342 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.345 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:46.348 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.350 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:46.354 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.356 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.358 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:46.360 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:46.388 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:46.393 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.396 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:46.427 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:46.430 +03:00 [INF] Worker running at: "2025-10-20T14:54:46.4305805+03:00"
2025-10-20 14:54:46.433 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:46.439 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:46.442 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:46.444 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.446 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.449 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.451 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:46.453 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:46.456 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.470 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.475 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.478 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.481 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.484 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:46.487 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.489 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:46.566 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:46.570 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.574 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.578 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:46.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:46.587 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.596 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.604 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.610 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:46.614 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.618 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:46.622 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.624 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.627 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:46.631 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:46.662 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:46.664 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.667 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:46.700 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:46.702 +03:00 [INF] Worker running at: "2025-10-20T14:54:46.7027073+03:00"
2025-10-20 14:54:46.705 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:46.709 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:46.711 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:46.713 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.715 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.718 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.720 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:46.723 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:46.725 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.749 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.754 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.756 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.759 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.763 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:46.767 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.769 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:46.837 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:46.841 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.843 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.846 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:46.850 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:46.853 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.859 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:46.863 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.865 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:46.869 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.871 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:46.874 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.876 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:46.878 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:46.880 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:46.905 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:46.908 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.911 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:46.942 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:46.944 +03:00 [INF] Worker running at: "2025-10-20T14:54:46.9445329+03:00"
2025-10-20 14:54:46.947 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:46.951 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:46.952 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:46.955 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.958 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.960 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:46.962 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:46.965 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:46.967 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.981 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:46.985 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.988 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:46.992 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:46.995 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:46.998 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.000 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:47.065 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:47.068 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.072 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.077 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.080 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:47.083 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:47.086 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.093 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.098 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.100 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:47.105 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.107 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:47.112 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.115 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.117 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:47.119 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:47.147 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:47.150 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.153 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:47.174 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:47.178 +03:00 [INF] Worker running at: "2025-10-20T14:54:47.1789640+03:00"
2025-10-20 14:54:47.181 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:47.189 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:47.190 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:47.193 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.196 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.199 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.202 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:47.204 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:47.207 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.219 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.223 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.226 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.229 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.232 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:47.235 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.237 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:47.298 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:47.301 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.305 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.309 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.311 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:47.314 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:47.317 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.324 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.327 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.329 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:47.332 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.334 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:47.337 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.339 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.342 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:47.344 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:47.365 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:47.369 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.372 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:47.400 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:47.403 +03:00 [INF] Worker running at: "2025-10-20T14:54:47.4032870+03:00"
2025-10-20 14:54:47.406 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:47.409 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:47.411 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:47.413 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.415 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.417 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.420 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:47.422 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:47.425 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.448 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.453 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.456 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.459 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.462 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:47.465 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.468 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:47.535 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:47.540 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.544 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.547 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.549 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:47.553 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:47.556 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.563 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.567 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.573 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:47.576 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.579 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:47.582 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.585 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.587 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:47.590 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:47.620 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:47.624 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.628 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:47.658 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:47.661 +03:00 [INF] Worker running at: "2025-10-20T14:54:47.6613496+03:00"
2025-10-20 14:54:47.664 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:47.668 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:47.669 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:47.671 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.673 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.676 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:47.680 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:47.682 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.704 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.708 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.712 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.715 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.718 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:47.721 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.724 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:47.803 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:47.807 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.810 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.813 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.815 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:47.818 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:47.820 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.826 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:47.830 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.834 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:47.837 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.840 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:47.843 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.845 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:47.848 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:47.852 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:47.876 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:47.881 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.883 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:47.907 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:47.910 +03:00 [INF] Worker running at: "2025-10-20T14:54:47.9109648+03:00"
2025-10-20 14:54:47.913 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:47.917 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:47.918 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:47.920 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.923 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.926 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:47.928 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:47.931 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:47.933 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.948 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:47.952 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.956 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:47.959 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.962 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:47.965 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:47.967 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:48.029 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:48.034 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.037 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.040 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.042 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:48.045 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:48.047 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.053 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.058 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.061 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:48.063 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.066 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:48.068 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.070 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.072 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:48.074 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:48.097 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:48.099 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.102 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:48.130 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:48.132 +03:00 [INF] Worker running at: "2025-10-20T14:54:48.1324886+03:00"
2025-10-20 14:54:48.135 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:48.140 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:48.142 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:48.144 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.147 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.149 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.151 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:48.154 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:48.157 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.172 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.179 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.181 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.184 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.186 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:48.190 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.194 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:48.277 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:48.280 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.282 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.285 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.287 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:48.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:48.293 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.299 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.303 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.306 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:48.309 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.312 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:48.316 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.318 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.320 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:48.322 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:48.349 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:48.351 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.355 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:48.381 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:48.384 +03:00 [INF] Worker running at: "2025-10-20T14:54:48.3844688+03:00"
2025-10-20 14:54:48.387 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:48.392 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:48.394 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:48.396 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.399 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.401 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:48.406 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:48.409 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.431 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.436 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.439 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.442 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.445 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:48.448 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.450 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:48.520 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:48.541 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.550 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.554 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.557 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:48.560 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:48.564 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.574 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.579 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.584 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:48.590 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.593 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:48.596 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.599 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.601 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:48.603 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:48.630 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:48.633 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.636 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:48.669 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:48.673 +03:00 [INF] Worker running at: "2025-10-20T14:54:48.6734633+03:00"
2025-10-20 14:54:48.677 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:48.681 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:48.683 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:48.685 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.687 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:48.695 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:48.697 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.713 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.719 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.723 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.726 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.730 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:48.734 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.737 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:48.815 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:48.819 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.821 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.824 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.826 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:48.829 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:48.832 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.838 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:48.842 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.846 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:48.849 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.852 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:48.857 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.859 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:48.861 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:48.863 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:48.891 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:48.893 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.895 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:48.927 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:48.930 +03:00 [INF] Worker running at: "2025-10-20T14:54:48.9300864+03:00"
2025-10-20 14:54:48.932 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:48.937 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:48.938 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:48.940 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.943 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.946 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:48.948 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:48.950 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:48.953 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.967 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:48.971 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.973 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:48.976 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.979 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:48.982 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:48.984 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.081 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:49.087 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.090 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.092 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.094 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:49.097 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:49.100 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.106 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.110 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.113 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:49.117 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.119 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.123 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.126 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.128 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:49.130 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:49.153 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:49.158 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.160 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:49.198 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:49.202 +03:00 [INF] Worker running at: "2025-10-20T14:54:49.2025204+03:00"
2025-10-20 14:54:49.205 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:49.210 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:49.214 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:49.216 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.220 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.225 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:49.228 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:49.231 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:49.245 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:49.251 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:49.254 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:49.257 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.260 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:49.264 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.266 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.353 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:49.358 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.360 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.362 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.364 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:49.367 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:49.369 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.375 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.380 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.382 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:49.385 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.388 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.392 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.394 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.397 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:49.399 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:49.433 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:49.436 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.439 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:49.466 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:49.468 +03:00 [INF] Worker running at: "2025-10-20T14:54:49.4688836+03:00"
2025-10-20 14:54:49.471 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:49.475 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:49.477 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:49.479 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.482 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.484 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.486 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:49.489 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:49.491 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:49.514 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:49.519 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:49.523 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:49.525 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.528 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:49.531 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.534 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.606 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:49.609 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.612 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.615 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.617 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:49.621 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:49.624 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.630 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.633 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.635 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:49.639 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.642 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.645 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.647 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.650 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:49.652 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:49.680 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:49.683 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.686 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:49.714 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:49.717 +03:00 [INF] Worker running at: "2025-10-20T14:54:49.7171469+03:00"
2025-10-20 14:54:49.720 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:49.724 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:49.726 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:49.729 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.731 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.736 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:49.741 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:49.744 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:49.767 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:49.774 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:49.777 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:49.780 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.783 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:49.786 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.790 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:49.860 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:49.863 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.866 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.869 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.871 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:49.874 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:49.878 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.883 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:49.887 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.892 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:49.896 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.899 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:49.902 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.904 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:49.907 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:49.910 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:49.937 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:49.939 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.941 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:49.969 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:49.971 +03:00 [INF] Worker running at: "2025-10-20T14:54:49.9713916+03:00"
2025-10-20 14:54:49.974 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:49.978 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:49.979 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:49.981 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.984 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:49.987 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:49.990 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:49.993 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:49.996 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.008 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.019 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.022 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.025 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.028 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:50.032 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.034 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.120 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:50.123 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.125 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.128 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.130 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:50.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:50.136 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.142 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.147 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.150 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:50.153 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.156 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.159 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.161 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.164 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:50.166 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:50.196 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:50.197 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.199 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:50.235 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:50.237 +03:00 [INF] Worker running at: "2025-10-20T14:54:50.2370907+03:00"
2025-10-20 14:54:50.239 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:50.243 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:50.245 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:50.247 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.250 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.252 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.254 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:50.256 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:50.259 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.280 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.286 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.289 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.292 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.295 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:50.298 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.300 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.374 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:50.377 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.380 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.383 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.386 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:50.389 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:50.392 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.398 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.401 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.403 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:50.406 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.409 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:50.413 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.415 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.417 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:50.419 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:50.446 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:50.448 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.452 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:50.488 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:50.490 +03:00 [INF] Worker running at: "2025-10-20T14:54:50.4904703+03:00"
2025-10-20 14:54:50.493 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:50.498 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:50.500 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:50.502 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.504 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.507 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.510 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:50.512 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:50.515 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.545 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.549 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.552 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.555 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.559 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:50.562 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.564 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.641 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:50.645 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.649 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.653 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.656 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:50.658 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:50.661 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.667 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.671 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.673 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:50.676 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.678 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.682 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.684 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.686 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:50.688 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:50.710 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:50.712 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.714 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:50.743 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:50.745 +03:00 [INF] Worker running at: "2025-10-20T14:54:50.7452823+03:00"
2025-10-20 14:54:50.747 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:50.752 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:50.755 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:50.757 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.760 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.762 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.764 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:50.766 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:50.769 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.781 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:50.785 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.787 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:50.789 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.792 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:50.795 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.797 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.891 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:50.896 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.899 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.901 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:50.903 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:50.905 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:50.907 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.913 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:50.917 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.919 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:50.922 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.924 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:50.928 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.930 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:50.932 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:50.934 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:50.964 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:50.968 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:50.971 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:51.004 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:51.006 +03:00 [INF] Worker running at: "2025-10-20T14:54:51.0067505+03:00"
2025-10-20 14:54:51.009 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:51.012 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:51.014 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:51.016 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.019 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.021 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.023 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:51.025 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:51.028 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.042 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.046 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.050 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.053 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.055 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:51.058 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.061 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:51.146 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:51.149 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.151 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.155 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.156 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:51.159 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:51.162 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.168 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.172 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.174 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:51.177 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.179 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:51.182 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.184 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.186 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:51.188 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:51.216 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:51.219 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.222 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:51.249 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:51.253 +03:00 [INF] Worker running at: "2025-10-20T14:54:51.2538100+03:00"
2025-10-20 14:54:51.256 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:51.260 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:51.262 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:51.265 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.267 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.269 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.270 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:51.273 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:51.276 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.287 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.292 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.295 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.298 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.301 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:51.306 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.309 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:51.387 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:51.391 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.395 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.401 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:51.404 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:51.407 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.412 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.416 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.419 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:51.422 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.424 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:51.427 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.429 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.431 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:51.433 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:51.462 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:51.464 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.467 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:51.494 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:51.496 +03:00 [INF] Worker running at: "2025-10-20T14:54:51.4960607+03:00"
2025-10-20 14:54:51.498 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:51.502 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:51.503 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:51.505 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.508 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.511 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.513 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:51.516 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:51.518 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.542 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.547 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.549 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.552 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.554 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:51.557 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.560 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:51.641 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:51.646 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.650 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.653 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.656 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:51.660 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:51.662 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.670 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.677 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.680 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:51.683 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.685 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:51.689 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.692 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.694 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:51.696 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:51.724 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:51.728 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.732 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:51.763 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:51.766 +03:00 [INF] Worker running at: "2025-10-20T14:54:51.7663320+03:00"
2025-10-20 14:54:51.769 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:51.775 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:51.777 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:51.778 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.781 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.784 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.787 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:51.790 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:51.792 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.815 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:51.822 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.825 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:51.827 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.830 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:51.833 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.836 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:51.904 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:51.908 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.911 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.913 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:51.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:51.917 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:51.920 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.926 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:51.931 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.933 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:51.937 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.940 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:51.944 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.946 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:51.948 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:51.950 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:51.977 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:51.980 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:51.983 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:52.006 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:52.010 +03:00 [INF] Worker running at: "2025-10-20T14:54:52.0105169+03:00"
2025-10-20 14:54:52.013 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:52.018 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:52.019 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:52.021 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.023 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.025 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:52.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:52.032 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.053 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.058 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.060 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.062 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.064 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:52.066 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.069 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:52.146 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:52.150 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.152 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.157 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:52.159 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:52.161 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:52.167 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:52.171 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.174 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:52.176 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.178 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:52.181 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:52.183 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:52.186 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:52.188 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:52.216 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:52.219 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.221 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:52.269 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:52.286 +03:00 [INF] Worker running at: "2025-10-20T14:54:52.2869055+03:00"
2025-10-20 14:54:52.290 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:52.295 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:52.297 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:52.299 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.302 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.304 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.305 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:52.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:52.310 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.335 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.340 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.343 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.346 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.349 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:52.353 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.357 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:52.436 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:52.441 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.445 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.448 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.450 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:52.452 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:52.454 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:52.460 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:52.464 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.466 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:52.469 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.471 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:52.474 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:52.476 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:52.478 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:52.480 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:52.510 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:52.513 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.515 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:52.542 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:52.545 +03:00 [INF] Worker running at: "2025-10-20T14:54:52.5453564+03:00"
2025-10-20 14:54:52.548 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:52.553 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:52.556 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:52.558 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.560 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.562 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.564 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:52.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:52.572 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.597 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.603 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.607 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.611 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.616 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 13ms reading results.
2025-10-20 14:54:52.620 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.623 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:52.708 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:52.713 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.715 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.717 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.719 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:52.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:52.726 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:52.732 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:52.735 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.738 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:52.741 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.743 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:52.746 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:52.749 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:52.751 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:52.753 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:52.789 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:52.794 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.798 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:52.832 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:52.835 +03:00 [INF] Worker running at: "2025-10-20T14:54:52.8358340+03:00"
2025-10-20 14:54:52.839 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:52.843 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:52.846 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:52.849 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.851 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.854 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:52.857 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:52.860 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:52.864 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.878 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:52.882 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.884 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:52.887 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.891 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:52.894 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.896 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:52.993 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:52.996 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:52.999 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.002 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.003 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:53.005 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:53.009 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.015 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.018 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.021 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:53.024 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.026 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:53.029 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.031 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.034 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:53.035 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:53.064 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:53.067 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.070 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:53.110 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:53.113 +03:00 [INF] Worker running at: "2025-10-20T14:54:53.1136377+03:00"
2025-10-20 14:54:53.116 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:53.119 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:53.120 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:53.122 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.124 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.128 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.129 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:53.132 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:53.134 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.158 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.162 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.165 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.168 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.171 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:53.174 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.176 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:53.253 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:53.255 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.257 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.258 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.260 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:53.261 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:53.263 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.267 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.271 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.273 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:53.277 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.281 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:53.283 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.285 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.287 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:53.288 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:53.305 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:53.307 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.308 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:53.327 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:53.329 +03:00 [INF] Worker running at: "2025-10-20T14:54:53.3290356+03:00"
2025-10-20 14:54:53.330 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:53.334 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:53.335 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:53.336 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.339 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.341 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.343 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:53.346 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:53.348 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.362 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.367 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.377 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.380 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.383 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 15ms reading results.
2025-10-20 14:54:53.387 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.390 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:53.461 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:53.463 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.465 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.467 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.469 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:53.471 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:53.472 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.477 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.481 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.483 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:53.487 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.489 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:53.493 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.495 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.497 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:53.499 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:53.527 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:53.529 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.532 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:53.553 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:53.556 +03:00 [INF] Worker running at: "2025-10-20T14:54:53.5566598+03:00"
2025-10-20 14:54:53.559 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:53.564 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:53.566 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:53.568 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.570 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.571 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.574 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:53.577 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:53.579 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.603 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.610 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.614 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.617 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.620 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:53.626 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.630 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:53.725 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:53.729 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.732 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.738 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:53.743 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-10-20 14:54:53.746 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.752 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.755 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.757 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:53.760 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.763 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:53.765 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.768 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.770 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:53.774 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:53.800 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:53.803 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.805 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:53.824 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:53.827 +03:00 [INF] Worker running at: "2025-10-20T14:54:53.8272602+03:00"
2025-10-20 14:54:53.829 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:53.832 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:53.834 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:53.835 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.837 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.839 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.841 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:53.844 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:53.847 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.862 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:53.868 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.872 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:53.875 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.879 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:53.883 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.886 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:53.948 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:53.952 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.955 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.959 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:53.960 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:53.962 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:53.964 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.976 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:53.983 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.986 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:53.989 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:53.992 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:53.995 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.997 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:53.999 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:54.001 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:54.034 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:54.036 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.040 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:54.082 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:54.085 +03:00 [INF] Worker running at: "2025-10-20T14:54:54.0851133+03:00"
2025-10-20 14:54:54.087 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:54.090 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:54.092 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:54.094 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.095 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.097 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:54.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:54.100 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:54.101 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:54.113 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:54.116 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:54.118 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:54.119 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.121 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:54.124 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.126 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:54.213 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:54.218 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.221 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:54.226 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:54.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:54.231 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:54.236 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:54.239 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.241 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:54.244 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.246 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:54.249 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:54.250 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:54.252 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:54.254 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:54.301 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:54.308 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.311 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:54.365 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:54.370 +03:00 [INF] Worker running at: "2025-10-20T14:54:54.3704110+03:00"
2025-10-20 14:54:54.374 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:54.378 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:54.380 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:54.382 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.386 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.390 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:54.392 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:54.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:54.397 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:54.411 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:54.418 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:54.422 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:54.426 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.429 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:54.433 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.437 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:54.535 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:54.538 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.540 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.542 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:54.544 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:54.547 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:54.549 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:54.553 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:54.558 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.560 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:54.563 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.565 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:54.568 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:54.569 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:54.571 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:54.574 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:54.624 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:54.627 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.629 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:54.664 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:54.668 +03:00 [INF] Worker running at: "2025-10-20T14:54:54.6685595+03:00"
2025-10-20 14:54:54.670 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:54.675 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:54.677 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:54.681 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.684 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.686 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:54.688 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:54.690 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:54.692 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:54.718 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:54.722 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:54.726 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:54.730 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.733 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:54.736 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.740 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:54.863 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:54.869 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.872 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.874 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:54.876 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:54.879 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:54.881 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:54.887 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:54.892 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.894 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:54.896 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.899 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:54.902 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:54.905 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:54.907 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:54.909 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:54.946 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:54.951 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:54.954 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:54.988 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:54.992 +03:00 [INF] Worker running at: "2025-10-20T14:54:54.9929856+03:00"
2025-10-20 14:54:54.995 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:54.998 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:55.000 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:55.002 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.004 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.009 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:55.012 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:55.015 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.032 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.037 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.041 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.045 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.047 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:55.050 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.051 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.143 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:55.149 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.151 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.153 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.156 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:55.157 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.159 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.164 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.167 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.171 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:55.175 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.177 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.179 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.181 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.183 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:55.184 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:55.200 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:55.202 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.205 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:55.224 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:55.226 +03:00 [INF] Worker running at: "2025-10-20T14:54:55.2265860+03:00"
2025-10-20 14:54:55.228 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:55.231 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:55.233 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:55.234 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.236 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.238 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.239 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.241 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.243 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.256 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.259 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.261 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.263 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.265 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:55.267 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.269 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.321 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:55.323 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.327 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.329 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.331 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.332 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.334 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.338 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.341 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.344 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:55.347 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.349 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.351 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.352 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.354 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:55.356 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:55.374 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:55.375 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.378 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:55.400 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:55.402 +03:00 [INF] Worker running at: "2025-10-20T14:54:55.4026244+03:00"
2025-10-20 14:54:55.404 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:55.407 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:55.408 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:55.410 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.411 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.413 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.414 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.416 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.418 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.428 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.432 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.434 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.436 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.438 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:55.440 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.442 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.491 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:55.493 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.495 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.497 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.500 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.502 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.507 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.511 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.512 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:55.515 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.517 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.519 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.520 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.522 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:55.524 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:55.542 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:55.543 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.545 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:55.563 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:55.565 +03:00 [INF] Worker running at: "2025-10-20T14:54:55.5654291+03:00"
2025-10-20 14:54:55.567 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:55.570 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:55.571 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:55.573 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.576 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.578 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:55.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:55.585 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.600 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.605 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.608 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.611 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.613 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:55.615 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.616 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.681 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:55.685 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.686 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.688 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.690 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.693 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:55.696 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.701 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.704 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.707 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:55.709 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.711 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.713 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.715 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.716 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:55.718 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:55.735 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:55.736 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.739 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:55.757 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:55.760 +03:00 [INF] Worker running at: "2025-10-20T14:54:55.7601472+03:00"
2025-10-20 14:54:55.761 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:55.764 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:55.765 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:55.767 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.769 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.770 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.772 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:55.775 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:55.778 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.790 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.793 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.795 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.797 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.799 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:55.801 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.803 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.857 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:55.861 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.863 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.868 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.870 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.876 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:55.879 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.882 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:55.884 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.886 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:55.888 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.891 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:55.893 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:55.894 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:55.911 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:55.914 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.916 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:55.934 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:55.936 +03:00 [INF] Worker running at: "2025-10-20T14:54:55.9367343+03:00"
2025-10-20 14:54:55.938 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:55.943 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:55.944 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:55.946 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.948 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.950 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:55.952 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:55.954 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:55.956 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.969 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:55.976 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.978 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:55.980 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.981 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:55.984 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:55.986 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:56.050 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:56.053 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.056 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.057 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:56.061 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.065 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.068 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.069 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:56.073 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.075 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:56.078 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.080 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.082 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:56.084 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:56.102 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:56.104 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.107 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:56.125 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:56.127 +03:00 [INF] Worker running at: "2025-10-20T14:54:56.1278800+03:00"
2025-10-20 14:54:56.129 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:56.132 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:56.134 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:56.135 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.137 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.139 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.140 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.142 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.144 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.155 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.160 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.162 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.165 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.168 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:56.170 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.174 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:56.235 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:56.239 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.242 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.244 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.245 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.247 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.249 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.253 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.258 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.260 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:56.262 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.264 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:56.266 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.267 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.269 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:56.271 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:56.294 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:56.296 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.298 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:56.322 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:56.326 +03:00 [INF] Worker running at: "2025-10-20T14:54:56.3261176+03:00"
2025-10-20 14:54:56.328 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:56.332 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:56.333 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:56.335 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.337 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.340 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.343 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:56.345 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:56.348 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.361 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.365 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.368 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.370 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.373 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:56.375 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.377 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:56.452 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:56.454 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.456 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.458 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.459 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.461 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.463 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.468 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.473 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.475 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:56.477 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.479 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:56.481 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.482 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.483 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:56.485 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:56.505 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:56.508 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.510 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:56.532 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:56.534 +03:00 [INF] Worker running at: "2025-10-20T14:54:56.5343861+03:00"
2025-10-20 14:54:56.536 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:56.540 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:56.541 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:56.544 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.545 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.547 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.549 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.551 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.553 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.566 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.573 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.577 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.580 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.582 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:56.586 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.588 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:56.666 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:56.670 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.674 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.679 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.682 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.684 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:56.687 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.694 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.698 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.701 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:56.703 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.705 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:56.708 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.710 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.711 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:56.713 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:56.730 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:56.732 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.734 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:56.764 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:56.766 +03:00 [INF] Worker running at: "2025-10-20T14:54:56.7668368+03:00"
2025-10-20 14:54:56.769 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:56.772 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:56.774 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:56.775 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.778 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.780 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.781 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.783 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.785 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.796 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.800 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.802 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.804 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.806 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:56.809 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.811 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:56.867 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:56.870 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.872 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.874 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.876 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.878 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.880 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.884 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:56.887 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.889 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:56.891 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.893 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:56.895 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.896 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:56.898 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:56.899 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:56.917 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:56.918 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.920 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:56.939 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:56.941 +03:00 [INF] Worker running at: "2025-10-20T14:54:56.9410684+03:00"
2025-10-20 14:54:56.942 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:56.945 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:56.946 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:56.948 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.950 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.951 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:56.953 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:56.955 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:56.957 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.970 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:56.979 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.981 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:56.983 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.985 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:56.988 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:56.990 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:57.118 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:57.122 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.126 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.129 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:57.131 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:57.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:57.137 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:57.143 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:57.147 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.150 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:57.153 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.157 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:57.160 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:57.162 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:57.164 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:57.166 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:57.207 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:57.210 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.213 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:57.268 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:57.276 +03:00 [INF] Worker running at: "2025-10-20T14:54:57.2767374+03:00"
2025-10-20 14:54:57.281 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:57.288 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:57.291 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:57.294 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.298 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.303 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:57.306 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:57.309 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:57.311 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:57.336 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:57.339 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:57.341 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:57.344 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.346 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:57.352 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.354 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:57.445 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:57.448 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.451 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:57.456 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:57.459 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:57.461 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:57.465 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:57.469 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.471 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:57.474 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.476 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:57.479 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:57.481 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:57.483 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:57.485 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:57.528 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:57.531 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.533 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:57.584 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:57.588 +03:00 [INF] Worker running at: "2025-10-20T14:54:57.5881524+03:00"
2025-10-20 14:54:57.591 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:57.595 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:57.597 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:57.599 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.601 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.604 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:57.607 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:57.610 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:57.613 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:57.638 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:57.647 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:57.651 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:57.654 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.659 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:57.664 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.667 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:57.783 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:57.787 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.789 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.791 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:57.792 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:57.794 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:57.797 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:57.802 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:57.806 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.810 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:57.812 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.815 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:57.816 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:57.820 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:57.822 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:57.827 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:57.858 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:57.861 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.862 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:57.896 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:57.899 +03:00 [INF] Worker running at: "2025-10-20T14:54:57.8992034+03:00"
2025-10-20 14:54:57.902 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:57.906 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:57.909 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:57.912 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.914 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.917 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:57.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:57.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:57.926 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:57.940 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:57.944 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:57.945 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:57.947 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.948 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:57.951 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:57.952 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:58.019 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:58.021 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.023 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.025 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:58.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:58.029 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:58.031 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:58.036 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:58.039 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.041 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:58.043 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.044 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:58.047 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:58.048 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:58.049 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:58.050 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:58.067 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:58.068 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.070 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:58.089 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:58.091 +03:00 [INF] Worker running at: "2025-10-20T14:54:58.0915696+03:00"
2025-10-20 14:54:58.093 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:58.096 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:58.097 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:58.098 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.100 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.102 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:58.104 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:58.107 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:58.109 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:58.122 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:58.128 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:58.131 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:58.133 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.136 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:58.140 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.143 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:58.203 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:58.206 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.208 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.211 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:58.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:58.215 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:58.219 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:58.225 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:58.230 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.234 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:58.240 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.244 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:58.251 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:58.257 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:58.260 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:58.263 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:58.293 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:58.297 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.299 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:58.331 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:58.333 +03:00 [INF] Worker running at: "2025-10-20T14:54:58.3337601+03:00"
2025-10-20 14:54:58.335 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:58.339 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:58.340 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:58.342 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.344 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.346 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:58.347 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:58.350 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:58.352 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:58.372 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:58.378 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:58.381 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:58.383 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.385 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:58.389 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.392 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:58.470 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:58.473 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:58.474 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
