2025-10-20 14:54:12.573 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:12.580 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.586 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:12.643 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:12.670 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.682 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.685 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.686 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.690 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:12.698 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.703 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.708 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.710 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:12.713 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.715 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:12.717 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.719 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.721 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:12.723 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:12.741 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:12.742 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.744 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:12.762 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:12.764 +03:00 [INF] Worker running at: "2025-10-20T14:54:12.7642194+03:00"
2025-10-20 14:54:12.767 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:12.770 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:12.771 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:12.773 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.774 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.776 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.777 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.779 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:12.781 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.794 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.797 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.798 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.800 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.802 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:12.804 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.806 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:12.859 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:12.863 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.865 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.867 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:12.876 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.883 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.887 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.895 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:12.919 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.924 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:12.928 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.931 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.933 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:12.935 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:12.953 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:12.954 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.957 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:12.978 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:12.979 +03:00 [INF] Worker running at: "2025-10-20T14:54:12.9796129+03:00"
2025-10-20 14:54:12.981 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:12.984 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:12.986 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:12.987 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.990 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.992 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.993 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.995 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:12.997 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.017 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.021 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.024 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.026 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.028 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:13.030 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.033 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:13.092 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:13.094 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.097 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.099 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.101 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:13.106 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.112 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.115 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.117 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:13.120 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.123 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:13.126 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.128 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.130 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:13.131 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:13.150 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:13.151 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.153 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:13.203 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:13.204 +03:00 [INF] Worker running at: "2025-10-20T14:54:13.2048014+03:00"
2025-10-20 14:54:13.206 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:13.209 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:13.210 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:13.212 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.214 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.215 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.216 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.218 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.220 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.233 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.235 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.237 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.240 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.242 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:13.244 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.246 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:13.299 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:13.303 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.308 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.313 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.316 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.321 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:13.325 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.331 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.335 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.338 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:13.341 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.344 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:13.347 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.350 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.353 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:13.355 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:13.374 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:13.375 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.378 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:13.397 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:13.399 +03:00 [INF] Worker running at: "2025-10-20T14:54:13.3998879+03:00"
2025-10-20 14:54:13.401 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:13.405 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:13.406 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:13.408 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.411 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.413 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.415 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:13.417 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:13.419 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.434 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.437 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.440 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.442 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.445 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:13.451 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.454 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:13.553 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:13.555 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.556 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.559 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.560 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.562 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.564 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.569 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.572 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.575 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:13.578 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.579 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:13.581 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.583 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.585 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:13.587 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:13.606 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:13.608 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.611 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:13.635 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:13.637 +03:00 [INF] Worker running at: "2025-10-20T14:54:13.6375647+03:00"
2025-10-20 14:54:13.639 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:13.641 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:13.643 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:13.644 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.646 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.647 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.649 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.651 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.652 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.663 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.667 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.669 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.671 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.673 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:13.676 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.678 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:13.758 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:13.760 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.762 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.765 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.767 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.768 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.772 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.775 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.776 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:13.779 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.780 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:13.782 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.783 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.785 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:13.786 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:13.809 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:13.811 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.813 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:13.837 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:13.838 +03:00 [INF] Worker running at: "2025-10-20T14:54:13.8389759+03:00"
2025-10-20 14:54:13.840 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:13.843 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:13.844 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:13.846 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.849 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.853 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.855 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.857 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.871 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:13.874 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.877 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:13.880 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.882 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:13.885 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.886 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:13.941 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:13.944 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.946 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.948 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:13.950 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:13.952 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:13.955 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.961 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:13.965 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.967 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:13.970 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:13.973 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:13.975 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.977 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:13.978 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:13.980 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:13.998 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:14.001 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.003 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:14.023 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:14.026 +03:00 [INF] Worker running at: "2025-10-20T14:54:14.0264062+03:00"
2025-10-20 14:54:14.028 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:14.031 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:14.032 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:14.033 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.035 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.038 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.040 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:14.043 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:14.046 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.059 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.066 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.071 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.074 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.077 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:14.080 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.082 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:14.144 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:14.147 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.150 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.152 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.154 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:14.157 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:14.161 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.167 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.171 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.173 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:14.176 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.178 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:14.181 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.182 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.184 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:14.186 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:14.205 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:14.207 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.210 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:14.230 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:14.232 +03:00 [INF] Worker running at: "2025-10-20T14:54:14.2325538+03:00"
2025-10-20 14:54:14.236 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:14.240 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:14.241 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:14.243 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.246 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.250 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.253 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:14.256 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:14.259 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.272 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.277 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.280 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.283 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.285 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:14.287 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.290 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:14.348 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:14.351 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.355 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.360 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.362 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:14.365 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:14.366 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.373 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.377 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.380 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:14.383 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.387 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:14.392 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.395 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.398 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:14.400 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:14.423 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:14.427 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.431 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:14.453 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:14.456 +03:00 [INF] Worker running at: "2025-10-20T14:54:14.4564988+03:00"
2025-10-20 14:54:14.459 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:14.462 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:14.464 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:14.466 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.469 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.472 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.474 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:14.476 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:14.479 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.492 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.497 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.500 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.504 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.506 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:14.509 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.511 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:14.574 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:14.577 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.579 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.582 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.585 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:14.588 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:14.590 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.598 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.602 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.605 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:14.608 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.612 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:14.614 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.616 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.618 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:14.621 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:14.641 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:14.644 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.647 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:14.670 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:14.672 +03:00 [INF] Worker running at: "2025-10-20T14:54:14.6729771+03:00"
2025-10-20 14:54:14.676 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:14.679 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:14.681 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:14.683 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.685 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.688 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:14.696 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:14.699 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.715 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.721 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.724 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.728 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.731 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:14.735 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.738 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:14.801 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:14.807 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.813 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.815 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.817 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:14.820 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:14.822 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.828 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:14.832 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.835 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:14.838 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.841 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:14.844 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.846 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:14.848 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:14.850 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:14.866 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:14.869 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.872 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:14.894 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:14.897 +03:00 [INF] Worker running at: "2025-10-20T14:54:14.8977777+03:00"
2025-10-20 14:54:14.899 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:14.904 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:14.906 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:14.908 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.910 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.912 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:14.914 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:14.917 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:14.920 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.935 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:14.939 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.942 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:14.944 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.947 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:14.949 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:14.952 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.015 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:15.019 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.025 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.031 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.033 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:15.035 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:15.037 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.044 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.049 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.051 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:15.054 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.057 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:15.060 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.063 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.064 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:15.066 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:15.084 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:15.086 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.088 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:15.110 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:15.114 +03:00 [INF] Worker running at: "2025-10-20T14:54:15.1142171+03:00"
2025-10-20 14:54:15.117 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:15.125 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:15.127 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:15.128 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.133 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.137 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.142 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:15.145 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:15.149 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.175 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.186 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.189 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.191 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.193 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:15.196 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.199 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.259 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:15.264 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.268 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.273 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.277 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:15.280 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:15.283 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.289 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.294 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.297 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:15.300 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.303 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.306 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.309 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.311 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:15.313 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:15.334 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:15.337 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.341 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:15.363 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:15.377 +03:00 [INF] Worker running at: "2025-10-20T14:54:15.3776945+03:00"
2025-10-20 14:54:15.381 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:15.386 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:15.388 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:15.390 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.394 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.397 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:15.402 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:15.405 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.428 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.433 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.436 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.439 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.442 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:15.444 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.446 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.506 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:15.509 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.512 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.514 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.516 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:15.519 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:15.521 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.527 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.531 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.534 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:15.536 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.539 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.542 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.544 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.546 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:15.548 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:15.567 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:15.569 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.571 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:15.595 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:15.597 +03:00 [INF] Worker running at: "2025-10-20T14:54:15.5979139+03:00"
2025-10-20 14:54:15.600 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:15.604 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:15.606 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:15.608 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.610 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.612 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.614 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:15.616 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:15.618 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.631 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.637 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.640 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.642 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.644 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:15.647 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.649 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.703 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:15.707 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.710 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.712 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.714 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:15.717 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:15.719 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.727 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.731 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.733 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:15.736 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.739 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:15.742 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.744 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.748 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:15.751 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:15.769 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:15.772 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.776 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:15.798 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:15.801 +03:00 [INF] Worker running at: "2025-10-20T14:54:15.8015443+03:00"
2025-10-20 14:54:15.804 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:15.808 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:15.810 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:15.812 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.814 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.816 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.818 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:15.820 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:15.823 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.837 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:15.843 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.846 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:15.848 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.851 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:15.855 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.858 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.918 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:15.922 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.925 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.929 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:15.932 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:15.935 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:15.938 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.945 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:15.950 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.953 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:15.956 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.958 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:15.961 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.963 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:15.965 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:15.967 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:15.986 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:15.987 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:15.989 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:16.011 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:16.014 +03:00 [INF] Worker running at: "2025-10-20T14:54:16.0147264+03:00"
2025-10-20 14:54:16.018 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:16.021 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:16.023 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:16.024 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.027 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.030 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:16.034 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:16.036 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.052 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.056 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.059 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.062 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.064 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:16.067 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.069 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:16.130 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:16.133 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.135 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.139 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.141 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:16.143 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:16.145 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.152 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.156 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.158 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:16.161 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.163 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:16.166 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.167 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.169 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:16.170 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:16.189 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:16.191 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.195 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:16.217 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:16.219 +03:00 [INF] Worker running at: "2025-10-20T14:54:16.2198025+03:00"
2025-10-20 14:54:16.223 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:16.230 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:16.233 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:16.234 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.237 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.239 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.241 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:16.244 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:16.247 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.266 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.274 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.278 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.282 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.285 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:16.289 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.292 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:16.351 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:16.358 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.362 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.365 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.368 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:16.371 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:16.373 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.382 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.389 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.391 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:16.395 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.401 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:16.405 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.408 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.411 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:16.414 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:16.434 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:16.437 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.441 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:16.461 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:16.465 +03:00 [INF] Worker running at: "2025-10-20T14:54:16.4653375+03:00"
2025-10-20 14:54:16.469 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:16.474 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:16.478 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:16.479 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.482 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.484 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:16.491 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:16.494 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.509 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.515 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.518 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.520 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.523 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:16.527 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.529 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:16.589 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:16.596 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.603 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.609 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.613 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:16.618 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:16.621 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.627 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.631 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.633 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:16.636 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.639 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:16.642 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.644 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.647 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:16.650 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:16.668 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:16.670 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.673 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:16.694 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:16.697 +03:00 [INF] Worker running at: "2025-10-20T14:54:16.6971604+03:00"
2025-10-20 14:54:16.699 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:16.705 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:16.706 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:16.709 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.712 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.715 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.717 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:16.721 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:16.725 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.737 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.741 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.745 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.747 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.749 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:16.752 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.754 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:16.806 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:16.810 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.813 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.816 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.819 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:16.823 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:16.826 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.832 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:16.836 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.839 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:16.842 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.844 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:16.847 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.850 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:16.852 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:16.854 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:16.872 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:16.874 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.877 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:16.895 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:16.898 +03:00 [INF] Worker running at: "2025-10-20T14:54:16.8980451+03:00"
2025-10-20 14:54:16.901 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:16.906 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:16.907 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:16.909 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.912 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.915 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:16.918 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:16.920 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:16.923 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.940 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:16.949 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.952 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:16.956 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.959 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:16.962 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:16.964 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.016 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:17.022 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.027 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.031 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.035 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:17.039 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:17.043 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.052 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.059 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.061 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:17.064 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.066 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.069 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.073 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.075 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:17.077 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:17.097 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:17.099 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.104 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:17.126 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:17.130 +03:00 [INF] Worker running at: "2025-10-20T14:54:17.1300567+03:00"
2025-10-20 14:54:17.133 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:17.138 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:17.139 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:17.140 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.142 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.145 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.148 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:17.152 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:17.155 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.179 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.184 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.187 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.190 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.193 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:17.196 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.199 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.255 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:17.259 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.261 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.263 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.265 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:17.267 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:17.269 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.274 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.278 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.280 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:17.282 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.285 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.288 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.290 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.292 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:17.294 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:17.314 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:17.316 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.318 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:17.340 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:17.344 +03:00 [INF] Worker running at: "2025-10-20T14:54:17.3447689+03:00"
2025-10-20 14:54:17.348 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:17.353 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:17.354 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:17.357 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.359 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.361 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.363 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:17.366 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:17.370 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.384 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.388 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.391 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.394 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.396 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:17.399 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.402 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.461 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:17.466 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.469 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.472 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.475 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:17.479 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:17.484 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.490 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.497 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.500 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:17.503 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.507 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:17.511 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.513 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.515 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:17.517 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:17.537 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:17.540 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.544 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:17.566 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:17.568 +03:00 [INF] Worker running at: "2025-10-20T14:54:17.5684718+03:00"
2025-10-20 14:54:17.571 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:17.574 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:17.577 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:17.579 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.581 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.583 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.585 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:17.587 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:17.589 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.603 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.608 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.610 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.613 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.615 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:17.618 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.620 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.680 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:17.683 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.686 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.688 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.690 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:17.692 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:17.695 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.700 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.704 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.706 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:17.708 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.710 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.713 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.715 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.718 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:17.720 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:17.742 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:17.745 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.748 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:17.767 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:17.769 +03:00 [INF] Worker running at: "2025-10-20T14:54:17.7699106+03:00"
2025-10-20 14:54:17.774 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:17.777 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:17.779 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:17.781 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.784 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.787 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.789 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:17.791 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:17.794 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.807 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:17.812 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.815 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:17.818 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.821 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:17.825 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.828 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:17.888 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:17.893 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.897 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.899 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.902 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:17.905 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:17.908 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.915 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:17.918 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.920 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:17.923 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.925 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:17.928 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.930 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:17.931 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:17.933 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:17.950 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:17.952 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.954 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:17.971 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:17.974 +03:00 [INF] Worker running at: "2025-10-20T14:54:17.9743884+03:00"
2025-10-20 14:54:17.979 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:17.982 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:17.983 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:17.985 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.988 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:17.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:17.993 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:17.995 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:17.998 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.011 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.015 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.018 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.020 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.023 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:18.026 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.028 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:18.080 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:18.083 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.086 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.088 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.090 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:18.092 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:18.094 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.099 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.104 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.105 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:18.108 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.110 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.112 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.114 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.116 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:18.119 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:18.138 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:18.139 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.142 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:18.162 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:18.167 +03:00 [INF] Worker running at: "2025-10-20T14:54:18.1671787+03:00"
2025-10-20 14:54:18.169 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:18.173 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:18.174 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:18.176 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.178 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.180 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.182 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:18.184 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:18.186 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.200 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.205 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.209 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.212 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.214 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:18.216 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.218 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:18.271 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:18.274 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.277 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.279 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.282 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:18.285 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:18.288 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.294 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.298 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.301 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:18.304 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.306 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.309 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.311 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.313 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:18.315 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:18.333 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:18.335 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.337 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:18.358 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:18.360 +03:00 [INF] Worker running at: "2025-10-20T14:54:18.3601817+03:00"
2025-10-20 14:54:18.362 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:18.366 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:18.367 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:18.369 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.371 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.374 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.376 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:18.378 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:18.381 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.394 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.398 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.400 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.402 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.404 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:18.408 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.411 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:18.467 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:18.473 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.478 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.481 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.483 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:18.486 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:18.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.496 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.500 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.502 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:18.505 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.508 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.510 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.512 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.515 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:18.518 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:18.539 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:18.544 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.549 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:18.576 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:18.580 +03:00 [INF] Worker running at: "2025-10-20T14:54:18.5806050+03:00"
2025-10-20 14:54:18.584 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:18.588 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:18.589 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:18.591 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.594 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.597 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.600 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:18.603 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:18.605 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.619 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.623 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.626 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.629 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.632 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:18.634 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.636 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.690 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:18.693 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.697 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.701 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.703 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:18.707 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:18.710 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.717 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.721 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.724 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:18.726 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.729 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.732 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.734 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.736 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:18.737 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:18.757 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:18.760 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.762 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:18.782 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:18.784 +03:00 [INF] Worker running at: "2025-10-20T14:54:18.7845411+03:00"
2025-10-20 14:54:18.786 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:18.791 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:18.792 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:18.794 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.797 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.799 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.803 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:18.805 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:18.807 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.821 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:18.825 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.828 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:18.830 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.832 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:18.834 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.836 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.894 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:18.898 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.903 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.906 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:18.908 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:18.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:18.914 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.918 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:18.923 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.926 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:18.929 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.931 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:18.935 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.938 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:18.940 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:18.943 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:18.963 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:18.966 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:18.969 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:18.990 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:18.992 +03:00 [INF] Worker running at: "2025-10-20T14:54:18.9925529+03:00"
2025-10-20 14:54:18.995 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:18.998 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:19.000 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:19.002 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.004 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.009 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:19.011 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:19.013 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.028 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.033 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.035 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.037 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.039 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:19.041 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.043 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:19.102 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:19.105 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.108 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.110 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.112 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:19.114 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:19.117 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.122 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.126 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.128 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:19.130 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.132 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:19.134 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.136 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.137 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:19.139 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:19.157 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:19.159 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.161 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:19.182 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:19.185 +03:00 [INF] Worker running at: "2025-10-20T14:54:19.1854532+03:00"
2025-10-20 14:54:19.189 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:19.194 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:19.196 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:19.198 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.202 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.204 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.207 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:19.209 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:19.211 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.226 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.232 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.236 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.238 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.240 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:19.242 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.245 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:19.315 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:19.317 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.319 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.325 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.327 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:19.329 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:19.331 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.336 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.342 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.345 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:19.347 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.349 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:19.351 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.353 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.356 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:19.358 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:19.377 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:19.379 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.384 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:19.408 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:19.410 +03:00 [INF] Worker running at: "2025-10-20T14:54:19.4106275+03:00"
2025-10-20 14:54:19.416 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:19.422 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:19.424 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:19.426 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.429 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.432 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.437 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:19.442 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-10-20 14:54:19.445 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.468 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.475 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.477 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.482 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.486 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:19.490 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.495 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:19.557 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:19.562 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.565 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.567 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.569 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:19.573 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:19.577 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.584 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.589 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.592 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:19.596 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.598 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:19.601 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.602 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.605 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:19.607 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:19.626 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:19.629 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.633 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:19.658 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:19.660 +03:00 [INF] Worker running at: "2025-10-20T14:54:19.6601516+03:00"
2025-10-20 14:54:19.663 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:19.666 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:19.667 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:19.669 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.671 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.672 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.674 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:19.675 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:19.677 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.690 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.695 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.697 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.699 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.701 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:19.704 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.707 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:19.766 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:19.771 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.773 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.780 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:19.782 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:19.784 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.790 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:19.794 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.796 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:19.801 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.804 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:19.808 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.810 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:19.812 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:19.814 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:19.835 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:19.840 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.842 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:19.863 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:19.865 +03:00 [INF] Worker running at: "2025-10-20T14:54:19.8657918+03:00"
2025-10-20 14:54:19.867 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:19.872 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:19.874 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:19.876 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.878 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.880 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:19.883 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:19.887 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:19.890 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.903 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:19.908 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.910 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:19.913 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.915 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:19.919 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.921 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:19.985 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:19.989 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.995 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:19.998 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.000 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:20.002 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:20.005 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.012 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.016 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.018 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:20.021 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.024 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.026 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.028 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.030 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:20.032 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:20.052 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:20.055 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.057 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:20.077 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:20.079 +03:00 [INF] Worker running at: "2025-10-20T14:54:20.0798136+03:00"
2025-10-20 14:54:20.082 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:20.087 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:20.088 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:20.091 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.094 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.096 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.098 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:20.100 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:20.103 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.120 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.126 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.128 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.130 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.132 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:20.135 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.138 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.207 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:20.212 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.215 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.218 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:20.223 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:20.225 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.231 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.237 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.240 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:20.243 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.245 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.248 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.251 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.253 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:20.255 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:20.274 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:20.276 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.282 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-10-20 14:54:20.311 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:20.315 +03:00 [INF] Worker running at: "2025-10-20T14:54:20.3152527+03:00"
2025-10-20 14:54:20.319 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:20.324 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:20.326 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:20.328 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.331 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.334 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.338 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:20.342 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:20.346 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.372 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.377 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.379 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.383 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.386 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:20.389 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.392 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.451 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:20.455 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.458 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.461 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.464 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:20.467 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:20.470 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.476 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.482 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.485 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:20.489 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.492 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:20.496 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.499 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.502 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:20.505 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:20.526 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:20.529 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.532 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:20.558 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:20.560 +03:00 [INF] Worker running at: "2025-10-20T14:54:20.5606186+03:00"
2025-10-20 14:54:20.563 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:20.566 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:20.567 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:20.569 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.571 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.574 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.576 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:20.579 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:20.581 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.593 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.597 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.600 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.603 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.608 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:20.612 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.614 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.670 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:20.677 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.683 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.687 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.689 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:20.692 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:20.695 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.703 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.710 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.713 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:20.716 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.718 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.721 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.723 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.725 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:20.727 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:20.748 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:20.750 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.752 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:20.772 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:20.775 +03:00 [INF] Worker running at: "2025-10-20T14:54:20.7753273+03:00"
2025-10-20 14:54:20.777 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:20.781 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:20.784 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:20.787 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.791 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.795 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:20.797 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:20.799 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.817 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:20.825 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.827 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:20.828 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.830 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:20.833 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.838 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:20.905 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:20.911 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.915 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.918 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:20.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:20.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:20.926 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.934 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:20.939 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.943 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:20.946 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.949 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:20.951 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.954 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:20.956 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:20.958 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:20.978 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:20.980 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:20.985 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:21.021 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:21.025 +03:00 [INF] Worker running at: "2025-10-20T14:54:21.0256274+03:00"
2025-10-20 14:54:21.027 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:21.032 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:21.034 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:21.037 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.039 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.041 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.043 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:21.045 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:21.047 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.074 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.081 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.086 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.090 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.094 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:21.097 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.101 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:21.174 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:21.182 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.185 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.192 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:21.197 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:21.199 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.209 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.213 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.215 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:21.219 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.223 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:21.227 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.229 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.232 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:21.234 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:21.257 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:21.259 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.261 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:21.285 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:21.291 +03:00 [INF] Worker running at: "2025-10-20T14:54:21.2912401+03:00"
2025-10-20 14:54:21.293 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:21.299 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:21.301 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:21.304 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.307 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.311 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.314 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:21.317 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:21.321 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.334 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.340 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.343 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.347 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.351 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:21.354 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.357 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:21.419 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:21.424 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.427 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.431 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:21.437 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:21.441 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.449 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.454 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.459 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:21.462 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.465 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:21.469 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.473 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.476 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:21.478 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:21.503 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:21.507 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.510 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:21.534 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:21.536 +03:00 [INF] Worker running at: "2025-10-20T14:54:21.5365178+03:00"
2025-10-20 14:54:21.538 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:21.542 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:21.543 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:21.545 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.548 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.550 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.552 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:21.556 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:21.558 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.569 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.573 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.576 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.578 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.580 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:21.584 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.586 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:21.646 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:21.649 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.651 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.655 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.659 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:21.662 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:21.664 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.669 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.673 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.675 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:21.678 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.680 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:21.682 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.684 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.686 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:21.687 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:21.709 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:21.711 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.713 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:21.736 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:21.740 +03:00 [INF] Worker running at: "2025-10-20T14:54:21.7403859+03:00"
2025-10-20 14:54:21.743 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:21.746 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:21.748 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:21.750 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.753 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.756 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.757 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:21.760 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:21.762 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.776 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.779 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.782 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.784 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.786 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:21.788 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.790 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:21.844 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:21.849 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.851 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.853 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.856 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:21.859 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:21.863 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.870 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:21.876 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.880 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:21.885 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.888 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:21.891 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.894 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:21.896 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:21.898 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:21.917 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:21.921 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.925 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:21.948 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:21.950 +03:00 [INF] Worker running at: "2025-10-20T14:54:21.9505598+03:00"
2025-10-20 14:54:21.954 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:21.960 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:21.961 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:21.963 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.966 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:21.969 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:21.974 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:21.977 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:21.980 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.993 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:21.996 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:21.998 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.000 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.003 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:22.006 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.009 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:22.065 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:22.070 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.072 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.075 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.078 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:22.081 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:22.084 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.090 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.093 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.095 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:22.099 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.101 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:22.104 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.106 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.108 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:22.111 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:22.134 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:22.138 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.142 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:22.165 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:22.168 +03:00 [INF] Worker running at: "2025-10-20T14:54:22.1684115+03:00"
2025-10-20 14:54:22.172 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:22.178 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:22.180 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:22.183 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.186 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.189 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.192 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:22.194 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:22.197 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:22.227 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:22.242 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.247 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.249 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.251 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:22.255 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.257 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:22.326 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:22.333 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.335 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.337 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.341 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:22.344 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:22.347 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.355 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.363 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.366 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:22.370 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.373 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:22.378 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.381 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.385 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:22.387 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:22.430 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:22.435 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.438 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:22.478 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:22.483 +03:00 [INF] Worker running at: "2025-10-20T14:54:22.4836332+03:00"
2025-10-20 14:54:22.490 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:22.496 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:22.500 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:22.505 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.509 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.514 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.519 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:22.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:22.525 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:22.543 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:22.549 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.552 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.555 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.558 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:22.561 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.564 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:22.655 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:22.660 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.662 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.665 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.667 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:22.672 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:22.675 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.682 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.685 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.687 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:22.691 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.694 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:22.697 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.699 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.701 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:22.703 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:22.731 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:22.735 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.740 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:22.775 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:22.782 +03:00 [INF] Worker running at: "2025-10-20T14:54:22.7829689+03:00"
2025-10-20 14:54:22.787 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:22.794 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:22.795 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:22.797 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.800 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.802 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.804 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:22.805 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:22.808 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:22.824 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:22.829 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.832 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:22.835 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.839 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:22.844 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.846 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:22.904 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:22.912 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.914 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.918 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:22.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:22.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:22.926 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.933 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:22.938 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.941 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:22.944 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.946 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:22.950 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.952 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:22.955 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:22.957 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:22.984 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:22.986 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:22.992 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:23.033 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:23.037 +03:00 [INF] Worker running at: "2025-10-20T14:54:23.0376457+03:00"
2025-10-20 14:54:23.042 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:23.051 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:23.053 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:23.056 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.059 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.061 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:23.063 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:23.065 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:23.069 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:23.100 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:23.109 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:23.113 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:23.116 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.119 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:23.125 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.128 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:23.247 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:23.254 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.258 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.262 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:23.267 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:23.271 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:23.275 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:23.286 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:23.293 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.298 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:23.303 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.308 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:23.314 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:23.317 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:23.320 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:23.324 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:23.363 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:23.366 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.369 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:23.396 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:23.402 +03:00 [INF] Worker running at: "2025-10-20T14:54:23.4020367+03:00"
2025-10-20 14:54:23.406 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:23.413 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:23.415 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:23.419 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.424 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.429 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:23.433 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:23.437 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:23.441 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:23.471 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:23.480 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:23.484 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:23.488 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.491 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:23.495 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.498 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:23.603 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:23.607 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.612 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.616 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:23.617 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:23.620 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:23.622 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:23.630 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:23.636 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.640 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:23.644 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.645 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:23.649 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:23.652 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:23.655 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:23.658 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:23.695 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:23.699 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.704 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:23.747 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:23.754 +03:00 [INF] Worker running at: "2025-10-20T14:54:23.7547066+03:00"
2025-10-20 14:54:23.759 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:23.764 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:23.766 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:23.772 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.776 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.780 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:23.784 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:23.788 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:23.791 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:23.812 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:23.819 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:23.826 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:23.831 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.835 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 15ms reading results.
2025-10-20 14:54:23.839 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.844 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:23.952 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:23.958 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.961 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:23.967 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:23.971 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:23.975 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:23.979 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:23.990 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:23.997 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.002 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:24.006 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.010 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:24.016 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:24.018 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:24.021 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:24.024 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:24.070 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:24.076 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.082 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:24.126 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:24.131 +03:00 [INF] Worker running at: "2025-10-20T14:54:24.1315084+03:00"
2025-10-20 14:54:24.135 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:24.141 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:24.144 +03:00 [DBG] Created DbConnection. (3ms).
2025-10-20 14:54:24.148 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.152 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.156 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:24.160 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:24.163 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:24.168 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:24.189 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:24.197 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:24.203 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:24.207 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.211 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 14ms reading results.
2025-10-20 14:54:24.216 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.219 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:24.320 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:24.328 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.333 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.340 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:24.344 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:24.348 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:24.352 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:24.365 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:24.373 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.377 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:24.382 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.386 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:24.392 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:24.394 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:24.397 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:24.400 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:24.423 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:24.428 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.431 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:24.455 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:24.458 +03:00 [INF] Worker running at: "2025-10-20T14:54:24.4581634+03:00"
2025-10-20 14:54:24.460 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:24.466 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:24.467 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:24.469 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.472 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.474 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:24.476 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:24.479 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:24.482 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:24.507 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:24.516 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:24.518 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:24.520 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.523 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:24.526 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.529 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:24.614 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:24.620 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.623 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:24.630 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:24.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:24.637 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:24.645 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:24.651 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.656 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:24.660 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.664 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:24.668 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:24.672 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:24.675 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:24.678 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:24.715 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:24.720 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.726 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:24.766 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:24.769 +03:00 [INF] Worker running at: "2025-10-20T14:54:24.7694160+03:00"
2025-10-20 14:54:24.772 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:24.780 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:24.781 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:24.784 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.788 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.792 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:24.794 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:24.799 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:24.803 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:24.823 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:24.830 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:24.834 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:24.838 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.842 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:24.846 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.851 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (5ms).
2025-10-20 14:54:24.949 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:24.955 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.961 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.964 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:24.967 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:24.971 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:24.976 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:24.983 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:24.987 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.990 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:24.993 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:24.995 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:24.997 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.000 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.003 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:25.006 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:25.043 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:25.049 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.054 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:25.102 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:25.108 +03:00 [INF] Worker running at: "2025-10-20T14:54:25.1085409+03:00"
2025-10-20 14:54:25.111 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:25.115 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:25.116 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:25.119 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.121 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.123 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:25.125 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:25.127 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:25.129 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:25.156 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:25.164 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:25.167 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:25.169 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.171 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:25.174 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.177 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:25.262 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:25.267 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.271 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.275 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:25.278 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:25.281 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:25.285 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:25.294 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:25.298 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.301 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:25.305 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.307 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:25.310 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.312 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.314 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:25.315 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:25.339 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:25.343 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.347 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:25.383 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:25.392 +03:00 [INF] Worker running at: "2025-10-20T14:54:25.3920853+03:00"
2025-10-20 14:54:25.397 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:25.404 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:25.407 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:25.410 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.414 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.418 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:25.420 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:25.423 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:25.425 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:25.436 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:25.441 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:25.446 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:25.449 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.451 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:25.455 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.459 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:25.529 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:25.533 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.538 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.541 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:25.545 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:25.548 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:25.550 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:25.556 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:25.562 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.564 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:25.567 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.570 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:25.572 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.574 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.576 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:25.578 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:25.602 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:25.606 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.609 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:25.633 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:25.640 +03:00 [INF] Worker running at: "2025-10-20T14:54:25.6401631+03:00"
2025-10-20 14:54:25.644 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:25.651 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:25.652 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:25.655 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.658 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.663 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:25.666 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:25.669 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:25.673 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:25.692 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:25.701 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:25.705 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:25.709 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.713 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:25.717 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.721 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:25.816 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:25.820 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.825 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.829 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:25.832 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:25.836 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:25.839 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:25.848 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:25.856 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.860 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:25.866 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.871 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:25.876 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.880 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:25.883 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:25.886 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:25.924 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:25.929 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.935 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:25.977 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:25.981 +03:00 [INF] Worker running at: "2025-10-20T14:54:25.9813060+03:00"
2025-10-20 14:54:25.989 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:25.993 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:25.994 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:25.996 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:25.999 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.003 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.004 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:26.006 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:26.008 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.021 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.025 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.027 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.029 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.031 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:26.033 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.035 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:26.117 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:26.124 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.129 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.133 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:26.141 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:26.146 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:26.155 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:26.162 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.166 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:26.172 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.177 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:26.181 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:26.184 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:26.187 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:26.193 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:26.234 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:26.239 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.245 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:26.279 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:26.282 +03:00 [INF] Worker running at: "2025-10-20T14:54:26.2828035+03:00"
2025-10-20 14:54:26.286 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:26.290 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:26.292 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:26.294 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.297 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.301 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.304 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:26.306 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:26.310 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.337 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.347 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.351 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.354 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.358 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 11ms reading results.
2025-10-20 14:54:26.364 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.368 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:26.472 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:26.480 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.484 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.488 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:26.495 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:26.498 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:26.507 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:26.513 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.518 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:26.522 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.525 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:26.528 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:26.531 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:26.534 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:26.536 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:26.555 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:26.557 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.560 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:26.585 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:26.588 +03:00 [INF] Worker running at: "2025-10-20T14:54:26.5888646+03:00"
2025-10-20 14:54:26.592 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:26.600 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:26.602 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:26.605 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.608 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.613 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.616 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:26.620 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:26.624 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.652 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.661 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.663 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.666 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.669 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:26.673 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.676 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:26.742 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:26.746 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.749 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.751 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.753 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:26.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:26.759 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:26.763 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:26.770 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.772 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:26.775 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.778 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:26.781 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:26.783 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:26.785 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:26.787 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:26.816 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:26.822 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.825 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:26.869 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:26.873 +03:00 [INF] Worker running at: "2025-10-20T14:54:26.8733868+03:00"
2025-10-20 14:54:26.879 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:26.885 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:26.887 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:26.891 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.896 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.899 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:26.903 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:26.907 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:26.911 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.929 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:26.936 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.939 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:26.941 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.943 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:26.946 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:26.949 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:27.011 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:27.017 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.020 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.024 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:27.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:27.029 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.035 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.038 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.040 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:27.042 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.045 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:27.047 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.049 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.052 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:27.054 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:27.073 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:27.076 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.079 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:27.101 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:27.104 +03:00 [INF] Worker running at: "2025-10-20T14:54:27.1046301+03:00"
2025-10-20 14:54:27.108 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:27.113 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:27.115 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:27.119 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.121 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.124 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.125 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:27.128 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:27.131 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:27.147 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:27.154 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:27.158 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:27.161 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.164 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:27.167 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.171 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:27.272 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:27.279 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.281 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.284 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.286 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:27.288 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:27.292 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.299 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.303 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.307 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:27.311 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.314 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:27.317 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.320 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.322 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:27.324 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:27.357 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:27.362 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.366 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:27.398 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:27.403 +03:00 [INF] Worker running at: "2025-10-20T14:54:27.4035888+03:00"
2025-10-20 14:54:27.406 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:27.410 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:27.412 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:27.415 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.419 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.423 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.427 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:27.431 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:27.436 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:27.463 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:27.473 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:27.476 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:27.479 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.482 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:27.485 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.490 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:27.601 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:27.609 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.613 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.618 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:27.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:27.627 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:27.633 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.644 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:27.649 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.653 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:27.657 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.661 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:27.665 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.668 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:27.672 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:27.674 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:27.703 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:27.706 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:27.710 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:27.742 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
