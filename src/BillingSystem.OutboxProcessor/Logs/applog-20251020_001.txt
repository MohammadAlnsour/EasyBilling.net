2025-10-20 14:53:59.799 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.809 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.811 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:53:59.814 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:53:59.815 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:53:59.817 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:53:59.822 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:53:59.825 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.827 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:53:59.829 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.830 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:53:59.833 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:53:59.834 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:53:59.835 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:53:59.837 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:53:59.859 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:53:59.861 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.863 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:53:59.884 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:53:59.885 +03:00 [INF] Worker running at: "2025-10-20T14:53:59.8856061+03:00"
2025-10-20 14:53:59.887 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:53:59.890 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:53:59.892 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:53:59.893 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.895 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.898 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:53:59.900 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:53:59.901 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:53:59.903 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:53:59.918 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:53:59.924 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:53:59.926 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:53:59.928 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.930 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:53:59.933 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:53:59.936 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:00.028 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:00.032 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.035 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.039 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.041 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:00.043 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:00.046 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.052 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.055 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.056 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:00.058 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.060 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.062 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.063 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.064 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:00.066 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:00.100 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:00.102 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.104 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:00.147 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:00.151 +03:00 [INF] Worker running at: "2025-10-20T14:54:00.1513271+03:00"
2025-10-20 14:54:00.155 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:00.158 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:00.160 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:00.162 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.164 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.165 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.166 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:00.168 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:00.169 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.191 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.194 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.195 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.197 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.199 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:00.201 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.204 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:00.298 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:00.302 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.303 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.306 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.307 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:00.309 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:00.312 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.318 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.322 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.324 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:00.327 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.328 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.330 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.332 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.333 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:00.336 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:00.371 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:00.375 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.377 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:00.402 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:00.405 +03:00 [INF] Worker running at: "2025-10-20T14:54:00.4055836+03:00"
2025-10-20 14:54:00.408 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:00.412 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:00.413 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:00.414 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.416 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.418 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.419 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:00.421 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:00.424 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.434 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.437 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.439 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.441 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.442 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:00.445 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.447 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.534 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:00.536 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.537 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.539 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.540 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:00.542 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:00.543 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.548 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.551 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.552 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:00.554 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.556 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.558 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.559 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.560 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:00.562 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:00.596 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:00.597 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.599 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:00.628 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:00.630 +03:00 [INF] Worker running at: "2025-10-20T14:54:00.6302771+03:00"
2025-10-20 14:54:00.633 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:00.636 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:00.636 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:00.638 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.640 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.641 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.643 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:00.644 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:00.646 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.667 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.670 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.673 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.675 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.676 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:00.678 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.679 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.766 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:00.770 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.773 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.775 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.778 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:00.779 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:00.781 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.786 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:00.788 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.790 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:00.792 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.794 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.796 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.797 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:00.798 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:00.800 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:00.831 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:00.832 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.834 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:00.872 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:00.874 +03:00 [INF] Worker running at: "2025-10-20T14:54:00.8749117+03:00"
2025-10-20 14:54:00.876 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:00.878 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:00.880 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:00.881 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.883 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.884 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.886 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:00.889 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:00.890 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.900 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:00.904 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.907 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:00.909 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.910 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:00.912 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.914 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:00.983 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:00.985 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.989 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:00.991 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:00.993 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:00.995 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:00.996 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.001 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.004 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.006 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:01.009 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.010 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.012 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.014 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.015 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:01.017 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:01.036 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:01.038 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.040 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:01.060 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:01.062 +03:00 [INF] Worker running at: "2025-10-20T14:54:01.0625147+03:00"
2025-10-20 14:54:01.064 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:01.067 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:01.068 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:01.070 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.072 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.074 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.075 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.077 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.079 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.090 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.093 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.094 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.096 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.097 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:01.099 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.101 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.156 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:01.158 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.160 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.162 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.164 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.165 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.167 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.172 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.174 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.176 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:01.178 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.180 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:01.183 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.184 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.185 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:01.187 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:01.207 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:01.209 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.210 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:01.245 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:01.248 +03:00 [INF] Worker running at: "2025-10-20T14:54:01.2481206+03:00"
2025-10-20 14:54:01.251 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:01.255 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:01.257 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:01.259 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.261 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.263 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.265 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.267 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.269 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.283 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.286 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.290 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.292 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.294 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:01.296 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.298 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.374 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:01.377 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.379 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.382 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.383 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.385 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.387 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.392 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.395 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.397 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:01.399 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.401 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.403 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.404 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.406 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:01.407 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:01.424 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:01.425 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.427 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:01.443 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:01.445 +03:00 [INF] Worker running at: "2025-10-20T14:54:01.4455182+03:00"
2025-10-20 14:54:01.447 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:01.450 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:01.451 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:01.453 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.454 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.456 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.457 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.459 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.461 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.474 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.477 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.478 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.480 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.482 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:01.484 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.486 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.540 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:01.543 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.544 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.546 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.547 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.549 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:01.550 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.554 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.556 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.558 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:01.561 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.562 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.564 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.566 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.567 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:01.568 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:01.586 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:01.587 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.590 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:01.611 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:01.612 +03:00 [INF] Worker running at: "2025-10-20T14:54:01.6126566+03:00"
2025-10-20 14:54:01.614 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:01.617 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:01.618 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:01.620 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.622 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.623 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.625 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.627 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.628 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.640 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.643 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.644 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.646 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.647 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:01.650 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.651 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.704 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:01.706 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.708 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.711 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.712 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.714 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.715 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.719 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.723 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.724 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:01.726 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.728 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.730 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.731 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.733 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:01.734 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:01.751 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:01.753 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.754 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:01.773 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:01.775 +03:00 [INF] Worker running at: "2025-10-20T14:54:01.7754088+03:00"
2025-10-20 14:54:01.777 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:01.779 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:01.780 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:01.781 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.783 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.784 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.786 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.787 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:01.789 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.801 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.804 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.806 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.808 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.809 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:01.811 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.813 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.868 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:01.870 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.872 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.873 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.875 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.876 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.878 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.882 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:01.885 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.886 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:01.888 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.890 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:01.892 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.893 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:01.894 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:01.895 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:01.913 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:01.914 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.916 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:01.946 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:01.948 +03:00 [INF] Worker running at: "2025-10-20T14:54:01.9487371+03:00"
2025-10-20 14:54:01.950 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:01.952 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:01.953 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:01.955 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.957 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.959 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:01.960 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:01.962 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:01.963 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.977 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:01.980 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.981 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:01.983 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.985 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:01.986 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:01.988 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:02.052 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:02.055 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.057 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.060 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.061 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:02.063 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:02.065 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.069 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.071 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.073 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:02.075 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.076 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:02.078 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.080 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.081 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:02.082 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:02.115 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:02.119 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.121 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:02.158 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:02.161 +03:00 [INF] Worker running at: "2025-10-20T14:54:02.1615268+03:00"
2025-10-20 14:54:02.163 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:02.165 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:02.166 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:02.168 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.169 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.171 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.172 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:02.174 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:02.176 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.186 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.192 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.195 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.197 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.200 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:02.203 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.207 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:02.323 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:02.331 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.336 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.340 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.343 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:02.347 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:02.351 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.358 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.364 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.367 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:02.370 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.373 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:02.375 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.377 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.379 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:02.380 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:02.421 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:02.426 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.428 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:02.466 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:02.469 +03:00 [INF] Worker running at: "2025-10-20T14:54:02.4698878+03:00"
2025-10-20 14:54:02.473 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:02.476 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:02.478 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:02.480 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.482 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.484 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:02.490 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:02.493 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.508 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.511 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.513 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.516 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.518 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:02.521 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.524 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:02.608 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:02.611 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.612 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.615 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.617 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:02.619 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:02.620 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.625 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.628 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.630 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:02.632 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.634 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:02.636 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.637 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.638 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:02.640 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:02.664 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:02.665 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.667 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:02.693 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:02.695 +03:00 [INF] Worker running at: "2025-10-20T14:54:02.6958713+03:00"
2025-10-20 14:54:02.697 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:02.700 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:02.701 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:02.702 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.705 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.708 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.710 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:02.712 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:02.714 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.730 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.734 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.738 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.742 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.744 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:02.747 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.749 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:02.808 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:02.810 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.812 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.814 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:02.818 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:02.819 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.824 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:02.827 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.829 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:02.830 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.832 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:02.833 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.835 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:02.836 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:02.838 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:02.856 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:02.858 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.860 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:02.879 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:02.880 +03:00 [INF] Worker running at: "2025-10-20T14:54:02.8806504+03:00"
2025-10-20 14:54:02.882 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:02.885 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:02.886 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:02.889 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.891 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.893 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:02.894 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:02.896 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:02.898 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.912 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:02.914 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.917 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:02.918 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.920 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:02.924 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:02.926 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:03.017 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:03.022 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.024 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.025 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.027 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.028 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:03.030 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.035 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.039 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.042 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:03.045 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.048 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:03.052 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.054 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.056 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:03.058 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:03.075 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:03.077 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.079 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:03.100 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:03.101 +03:00 [INF] Worker running at: "2025-10-20T14:54:03.1019001+03:00"
2025-10-20 14:54:03.103 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:03.106 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:03.107 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:03.109 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.111 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.113 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.115 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.117 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:03.119 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.132 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.137 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.140 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.142 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.144 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:03.147 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.149 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:03.203 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:03.206 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.207 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.209 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.210 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.212 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.213 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.218 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.220 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.222 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:03.224 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.226 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:03.228 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.230 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.231 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:03.232 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:03.249 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:03.251 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.252 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:03.271 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:03.273 +03:00 [INF] Worker running at: "2025-10-20T14:54:03.2733542+03:00"
2025-10-20 14:54:03.275 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:03.278 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:03.279 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:03.280 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.282 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.284 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.285 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.287 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:03.289 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.301 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.304 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.306 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.308 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.309 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:03.311 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.313 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:03.368 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:03.370 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.372 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.374 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.376 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.378 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.380 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.384 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.386 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.388 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:03.390 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.392 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:03.395 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.396 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.397 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:03.399 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:03.420 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:03.422 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.425 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:03.446 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:03.447 +03:00 [INF] Worker running at: "2025-10-20T14:54:03.4477886+03:00"
2025-10-20 14:54:03.450 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:03.453 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:03.455 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:03.456 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.458 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.460 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.461 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.463 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.465 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.481 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.485 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.489 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.491 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.494 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:03.496 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.499 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:03.559 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:03.561 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.563 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.566 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.568 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:03.570 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.571 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.575 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.578 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.580 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:03.583 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.586 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:03.590 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.591 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.594 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:03.596 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:03.623 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:03.626 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.629 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:03.655 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:03.658 +03:00 [INF] Worker running at: "2025-10-20T14:54:03.6586186+03:00"
2025-10-20 14:54:03.660 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:03.664 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:03.666 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:03.667 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.670 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.672 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.674 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.676 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.677 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.687 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.691 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.694 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.697 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.699 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:03.702 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.706 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:03.795 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:03.799 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.802 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.806 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.808 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.810 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.812 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.818 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:03.822 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.825 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:03.830 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.833 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:03.837 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.840 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:03.843 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:03.846 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:03.875 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:03.878 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.881 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:03.908 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:03.911 +03:00 [INF] Worker running at: "2025-10-20T14:54:03.9110235+03:00"
2025-10-20 14:54:03.914 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:03.918 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:03.919 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:03.921 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.923 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.925 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:03.927 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:03.929 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:03.931 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.955 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:03.964 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.970 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:03.978 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.981 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 17ms reading results.
2025-10-20 14:54:03.993 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:03.997 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (4ms).
2025-10-20 14:54:04.092 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:04.094 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.095 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.097 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.099 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.101 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:04.102 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.107 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.110 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.111 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:04.113 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.115 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:04.117 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.119 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.120 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:04.121 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:04.146 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:04.149 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.151 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:04.173 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:04.175 +03:00 [INF] Worker running at: "2025-10-20T14:54:04.1753447+03:00"
2025-10-20 14:54:04.177 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:04.180 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:04.181 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:04.182 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.185 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.188 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.191 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:04.192 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:04.194 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.207 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.210 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.212 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.214 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.216 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:04.218 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.220 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:04.291 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:04.295 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.297 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.301 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.303 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:04.307 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.311 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.314 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.316 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:04.318 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.320 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:04.322 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.323 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.325 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:04.326 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:04.343 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:04.344 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.346 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:04.364 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:04.365 +03:00 [INF] Worker running at: "2025-10-20T14:54:04.3655214+03:00"
2025-10-20 14:54:04.369 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:04.376 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:04.377 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:04.378 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.379 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.381 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.382 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.383 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:04.385 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.396 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.399 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.401 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.403 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.405 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:04.407 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.409 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:04.455 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:04.458 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.460 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.462 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.463 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.464 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:04.466 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.470 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.474 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.476 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:04.478 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.480 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:04.483 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.484 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.485 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:04.486 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:04.546 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:04.548 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.550 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:04.571 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:04.573 +03:00 [INF] Worker running at: "2025-10-20T14:54:04.5737984+03:00"
2025-10-20 14:54:04.577 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:04.580 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:04.581 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:04.583 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.584 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.586 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.587 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.589 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:04.591 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.602 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.605 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.607 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.608 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.610 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:04.611 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.613 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:04.659 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:04.662 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.663 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.665 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.666 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.670 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:04.672 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.676 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.679 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.681 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:04.684 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.686 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:04.687 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.689 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.691 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:04.692 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:04.708 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:04.710 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.712 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:04.731 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:04.732 +03:00 [INF] Worker running at: "2025-10-20T14:54:04.7329801+03:00"
2025-10-20 14:54:04.734 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:04.737 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:04.738 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:04.740 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.742 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.744 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.747 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:04.749 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:04.751 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.763 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.767 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.768 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.770 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.772 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:04.774 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.777 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:04.838 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:04.843 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.844 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.846 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.849 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:04.851 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.856 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:04.859 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.860 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:04.863 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.866 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:04.868 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.869 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:04.871 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:04.874 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:04.901 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:04.904 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.907 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:04.939 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:04.942 +03:00 [INF] Worker running at: "2025-10-20T14:54:04.9423122+03:00"
2025-10-20 14:54:04.944 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:04.947 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:04.948 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:04.950 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.952 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.954 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:04.955 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:04.957 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:04.958 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.970 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:04.976 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.979 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:04.983 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.986 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:04.989 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:04.991 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.065 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:05.069 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.071 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.074 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.076 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.078 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.080 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.086 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.092 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.095 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:05.098 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.100 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.102 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.104 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.106 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:05.107 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:05.131 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:05.132 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.136 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:05.164 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:05.167 +03:00 [INF] Worker running at: "2025-10-20T14:54:05.1673241+03:00"
2025-10-20 14:54:05.169 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:05.174 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:05.175 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:05.177 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.178 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.182 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.183 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.185 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.187 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.209 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.213 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.215 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.217 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.219 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:05.223 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.225 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.283 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:05.285 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.286 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.288 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.292 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.293 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.298 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.303 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.305 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:05.309 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.310 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.313 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.314 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.315 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:05.317 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:05.333 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:05.334 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.336 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:05.355 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:05.357 +03:00 [INF] Worker running at: "2025-10-20T14:54:05.3570046+03:00"
2025-10-20 14:54:05.359 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:05.361 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:05.362 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:05.364 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.366 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.367 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.368 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.370 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.372 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.383 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.386 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.388 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.390 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.392 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:05.393 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.395 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.452 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:05.455 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.458 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.460 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.461 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.463 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:05.465 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.469 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.472 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.473 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:05.475 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.477 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.480 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.481 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.483 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:05.484 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:05.503 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:05.504 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.506 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:05.526 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:05.528 +03:00 [INF] Worker running at: "2025-10-20T14:54:05.5280560+03:00"
2025-10-20 14:54:05.529 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:05.532 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:05.533 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:05.534 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.536 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.538 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.540 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.541 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.543 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.553 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.556 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.558 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.560 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.561 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:05.563 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.565 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.614 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:05.616 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.618 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.620 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:05.624 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:05.626 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.630 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.633 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.635 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:05.637 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.639 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:05.642 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.643 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.645 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:05.646 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:05.668 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:05.670 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.673 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:05.693 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:05.694 +03:00 [INF] Worker running at: "2025-10-20T14:54:05.6944063+03:00"
2025-10-20 14:54:05.696 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:05.699 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:05.700 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:05.701 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.702 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.704 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.706 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:05.708 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.709 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.720 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.723 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.725 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.726 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.728 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:05.731 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.732 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.783 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:05.786 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.788 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.790 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.792 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.794 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.795 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.800 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.803 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.805 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:05.807 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.808 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.810 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.811 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.812 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:05.814 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:05.831 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:05.833 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.835 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:05.855 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:05.856 +03:00 [INF] Worker running at: "2025-10-20T14:54:05.8567282+03:00"
2025-10-20 14:54:05.859 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:05.861 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:05.863 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:05.864 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.866 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.867 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.871 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.873 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.884 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:05.886 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.888 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:05.890 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.892 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:05.894 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.895 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.947 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:05.949 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.952 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.954 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:05.956 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:05.958 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:05.959 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.964 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:05.968 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.970 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:05.973 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:05.974 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:05.977 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.978 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:05.979 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:05.981 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:05.998 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:05.999 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.001 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:06.022 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:06.024 +03:00 [INF] Worker running at: "2025-10-20T14:54:06.0248309+03:00"
2025-10-20 14:54:06.026 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:06.029 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:06.030 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:06.031 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.033 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.035 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.036 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.038 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.041 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.053 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.056 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.058 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.060 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.062 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:06.064 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.066 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:06.118 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:06.120 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.124 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.128 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.130 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.132 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.138 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.141 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.143 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:06.145 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.147 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:06.149 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.151 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.152 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:06.153 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:06.173 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:06.176 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.177 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:06.202 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:06.205 +03:00 [INF] Worker running at: "2025-10-20T14:54:06.2059001+03:00"
2025-10-20 14:54:06.208 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:06.210 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:06.212 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:06.213 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.215 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.217 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.219 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.222 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.234 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.236 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.238 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.240 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.242 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:06.244 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.246 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:06.298 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:06.300 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.302 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.304 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.305 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.307 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.309 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.313 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.317 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.318 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:06.320 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.323 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:06.325 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.326 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.328 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:06.329 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:06.348 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:06.350 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.352 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:06.370 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:06.373 +03:00 [INF] Worker running at: "2025-10-20T14:54:06.3730951+03:00"
2025-10-20 14:54:06.375 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:06.378 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:06.379 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:06.380 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.382 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.384 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.385 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.386 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:06.390 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.405 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.408 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.409 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.411 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.413 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:06.415 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.417 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:06.466 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:06.469 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.471 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.473 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.475 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.477 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.479 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.483 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.485 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.487 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:06.489 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.491 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:06.493 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.494 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.495 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:06.497 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:06.515 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:06.516 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.518 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:06.545 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:06.551 +03:00 [INF] Worker running at: "2025-10-20T14:54:06.5514365+03:00"
2025-10-20 14:54:06.556 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:06.559 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:06.561 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:06.564 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.567 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.569 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.571 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.573 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.575 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.588 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.593 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.596 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.598 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.600 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:06.603 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.605 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:06.666 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:06.668 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.672 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.673 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.675 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.676 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.678 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.683 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.685 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.687 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:06.690 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.692 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:06.695 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.696 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.698 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:06.699 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:06.723 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:06.725 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.728 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:06.753 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:06.755 +03:00 [INF] Worker running at: "2025-10-20T14:54:06.7556531+03:00"
2025-10-20 14:54:06.758 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:06.762 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:06.763 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:06.765 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.766 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.768 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.770 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.771 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:06.773 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.783 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:06.786 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.788 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:06.790 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.792 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:06.794 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.795 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:06.869 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:06.876 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.880 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.882 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.883 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:06.885 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:06.887 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.893 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:06.895 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.897 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:06.898 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.901 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:06.902 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.904 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:06.906 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:06.907 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:06.929 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:06.932 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.935 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:06.965 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:06.971 +03:00 [INF] Worker running at: "2025-10-20T14:54:06.9715129+03:00"
2025-10-20 14:54:06.975 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:06.982 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:06.983 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:06.984 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.986 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:06.989 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:06.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:06.993 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:06.994 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.007 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.010 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.012 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.014 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.015 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:07.020 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.021 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:07.086 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:07.090 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.093 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.095 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.097 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.099 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:07.101 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.107 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.110 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.112 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:07.114 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.116 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:07.118 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.120 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.122 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:07.125 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:07.153 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:07.156 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.157 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:07.195 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:07.199 +03:00 [INF] Worker running at: "2025-10-20T14:54:07.1994334+03:00"
2025-10-20 14:54:07.201 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:07.203 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:07.204 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:07.207 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.210 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.211 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.215 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:07.216 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.228 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.233 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.235 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.237 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.240 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:07.242 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.245 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:07.310 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:07.313 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.316 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.318 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.319 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.322 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:07.326 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.330 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.334 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.336 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:07.340 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.343 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:07.345 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.348 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.350 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:07.352 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:07.395 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:07.398 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.400 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:07.451 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:07.454 +03:00 [INF] Worker running at: "2025-10-20T14:54:07.4546986+03:00"
2025-10-20 14:54:07.456 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:07.459 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:07.461 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:07.463 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.465 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.468 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.470 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.472 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:07.475 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.491 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.496 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.500 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.501 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.503 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:07.505 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.507 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:07.573 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:07.578 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.580 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.582 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.584 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.587 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:07.591 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.598 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.602 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.605 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:07.609 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.613 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:07.617 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.619 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.621 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:07.624 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:07.657 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:07.659 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.662 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:07.681 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:07.683 +03:00 [INF] Worker running at: "2025-10-20T14:54:07.6834253+03:00"
2025-10-20 14:54:07.685 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:07.688 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:07.689 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:07.693 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.695 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.697 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.698 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.701 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:07.702 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.712 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.715 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.718 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.720 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.722 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:07.725 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.727 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:07.816 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:07.819 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.821 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.824 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.826 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:07.829 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:07.831 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.836 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:07.839 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.841 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:07.843 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.845 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:07.847 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.848 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:07.850 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:07.852 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:07.876 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:07.877 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.879 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:07.906 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:07.908 +03:00 [INF] Worker running at: "2025-10-20T14:54:07.9082628+03:00"
2025-10-20 14:54:07.910 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:07.914 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:07.915 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:07.917 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.919 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.921 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:07.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:07.924 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:07.926 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.938 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:07.942 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.945 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:07.948 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.951 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:07.955 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:07.957 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:08.050 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:08.052 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.054 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.056 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.057 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:08.062 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.066 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.069 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.071 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:08.072 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.074 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:08.076 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.077 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.079 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:08.080 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:08.099 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:08.100 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.103 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:08.123 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:08.125 +03:00 [INF] Worker running at: "2025-10-20T14:54:08.1252111+03:00"
2025-10-20 14:54:08.126 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:08.129 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:08.130 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:08.132 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.134 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.135 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.141 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:08.145 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.166 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.172 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.174 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.176 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.179 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:08.182 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.185 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:08.279 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:08.283 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.286 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.291 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:08.294 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:08.298 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.306 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.309 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.312 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:08.314 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.316 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:08.318 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.319 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.321 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:08.323 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:08.353 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:08.356 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.361 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:08.390 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:08.392 +03:00 [INF] Worker running at: "2025-10-20T14:54:08.3926535+03:00"
2025-10-20 14:54:08.394 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:08.398 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:08.399 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:08.401 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.403 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.404 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.407 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:08.411 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-20 14:54:08.413 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.426 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.430 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.432 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.434 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.436 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:08.438 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.440 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:08.493 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:08.495 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.497 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.498 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.500 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.501 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:08.503 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.507 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.510 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.511 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:08.513 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.515 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:08.518 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.520 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.521 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:08.522 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:08.546 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:08.548 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.550 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:08.585 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:08.589 +03:00 [INF] Worker running at: "2025-10-20T14:54:08.5894265+03:00"
2025-10-20 14:54:08.591 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:08.595 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:08.597 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:08.599 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.602 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.604 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.606 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.608 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:08.610 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.624 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.629 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.632 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.635 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.638 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:08.641 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.643 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:08.698 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:08.701 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.703 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.705 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.707 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.710 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:08.713 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.717 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.720 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.722 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:08.724 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.726 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:08.728 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.729 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.731 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:08.732 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:08.753 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:08.755 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.757 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:08.778 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:08.781 +03:00 [INF] Worker running at: "2025-10-20T14:54:08.7812569+03:00"
2025-10-20 14:54:08.782 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:08.785 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:08.787 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:08.790 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.791 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.793 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.795 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.797 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:08.798 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.810 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.813 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.815 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.816 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.818 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:08.820 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.822 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:08.869 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:08.872 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.873 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.875 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.876 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.878 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:08.881 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.886 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:08.889 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.891 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:08.893 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.895 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:08.897 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.898 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:08.900 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:08.901 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:08.922 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:08.925 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.927 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:08.946 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:08.948 +03:00 [INF] Worker running at: "2025-10-20T14:54:08.9485747+03:00"
2025-10-20 14:54:08.950 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:08.953 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:08.955 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:08.957 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.958 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.960 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:08.961 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:08.963 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:08.965 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.978 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:08.981 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.983 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:08.986 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.988 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:08.990 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:08.992 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:09.042 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:09.044 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.046 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.047 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.049 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:09.051 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:09.053 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.058 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.061 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.063 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:09.065 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.067 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:09.069 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.071 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.072 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:09.073 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:09.092 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:09.095 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.097 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:09.119 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:09.121 +03:00 [INF] Worker running at: "2025-10-20T14:54:09.1216976+03:00"
2025-10-20 14:54:09.123 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:09.127 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:09.129 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:09.130 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.132 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.135 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:09.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:09.138 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.150 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.153 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.154 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.156 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.158 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:09.160 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.162 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:09.217 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:09.219 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.221 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.225 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:09.227 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:09.228 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.232 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.236 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.239 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:09.242 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.244 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:09.246 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.248 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.249 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:09.251 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:09.269 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:09.272 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.275 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:09.298 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:09.300 +03:00 [INF] Worker running at: "2025-10-20T14:54:09.3007167+03:00"
2025-10-20 14:54:09.302 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:09.307 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:09.309 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:09.311 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.313 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.316 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.318 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:09.321 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:09.323 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.337 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.341 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.344 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.346 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.348 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:09.351 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.353 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:09.422 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:09.426 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.430 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.435 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:09.437 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:09.439 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.444 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.447 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.450 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:09.452 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.455 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:09.458 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.460 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.461 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:09.463 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:09.483 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:09.484 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.486 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:09.518 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:09.523 +03:00 [INF] Worker running at: "2025-10-20T14:54:09.5233936+03:00"
2025-10-20 14:54:09.528 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:09.538 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:09.540 +03:00 [DBG] Created DbConnection. (2ms).
2025-10-20 14:54:09.542 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.544 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.553 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:09.557 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:09.559 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.574 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.577 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.579 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.582 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.585 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:09.590 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.592 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:09.650 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:09.654 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.656 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.658 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.660 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:09.661 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:09.663 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.669 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.673 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.676 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:09.679 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.681 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:09.684 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.686 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.688 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:09.690 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:09.710 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:09.712 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.714 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:09.737 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:09.738 +03:00 [INF] Worker running at: "2025-10-20T14:54:09.7389915+03:00"
2025-10-20 14:54:09.740 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:09.743 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:09.744 +03:00 [DBG] Created DbConnection. (0ms).
2025-10-20 14:54:09.746 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.749 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.752 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.754 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:09.759 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-10-20 14:54:09.762 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.774 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.778 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.781 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.783 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.785 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:09.787 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.789 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:09.844 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:09.847 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.848 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.851 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.853 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:09.855 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:09.858 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.862 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:09.865 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.867 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:09.870 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.872 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:09.876 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.878 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:09.880 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:09.881 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:09.901 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:09.903 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.906 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:09.928 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:09.930 +03:00 [INF] Worker running at: "2025-10-20T14:54:09.9306638+03:00"
2025-10-20 14:54:09.932 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:09.935 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:09.937 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:09.939 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.942 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.944 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:09.946 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:09.948 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:09.951 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.966 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:09.970 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.972 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:09.974 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.976 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:09.978 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:09.980 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:10.030 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:10.033 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.036 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.038 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.040 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:10.042 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:10.044 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.048 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.051 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.053 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:10.055 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.056 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:10.059 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.060 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.062 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:10.063 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:10.086 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:10.087 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.090 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:10.114 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:10.116 +03:00 [INF] Worker running at: "2025-10-20T14:54:10.1164983+03:00"
2025-10-20 14:54:10.118 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:10.121 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:10.123 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:10.126 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.129 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.132 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:10.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:10.139 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.151 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.154 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.156 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.157 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.159 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:10.161 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.163 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:10.228 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:10.230 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.233 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.234 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.236 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:10.238 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:10.240 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.245 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.249 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.251 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:10.254 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.256 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:10.260 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.262 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.266 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:10.268 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:10.304 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:10.311 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.315 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:10.335 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:10.337 +03:00 [INF] Worker running at: "2025-10-20T14:54:10.3372814+03:00"
2025-10-20 14:54:10.341 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:10.344 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:10.345 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:10.348 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.350 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.352 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.357 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:10.360 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-20 14:54:10.363 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.391 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.398 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.401 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.404 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.407 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 9ms reading results.
2025-10-20 14:54:10.410 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.412 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:10.483 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:10.487 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.490 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.493 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.495 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:10.498 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:10.500 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.506 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.511 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.513 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:10.516 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.518 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:10.521 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.522 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.524 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:10.526 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:10.546 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:10.548 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.550 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:10.570 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:10.572 +03:00 [INF] Worker running at: "2025-10-20T14:54:10.5722842+03:00"
2025-10-20 14:54:10.575 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:10.578 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:10.579 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:10.580 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.582 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.585 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.586 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:10.589 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:10.592 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.605 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.608 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.611 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.613 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.615 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 7ms reading results.
2025-10-20 14:54:10.619 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.622 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:10.684 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:10.688 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.691 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.694 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.696 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:10.699 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:10.702 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.708 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.713 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.716 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:10.719 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.721 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:10.724 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.725 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.727 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:10.729 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:10.754 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:10.755 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.757 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:10.776 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:10.777 +03:00 [INF] Worker running at: "2025-10-20T14:54:10.7778841+03:00"
2025-10-20 14:54:10.780 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:10.783 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:10.784 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:10.787 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.790 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.792 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.794 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:10.797 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:10.799 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.812 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:10.816 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.819 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:10.824 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.828 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 12ms reading results.
2025-10-20 14:54:10.830 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.834 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:10.884 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:10.887 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.890 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.892 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.894 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:10.896 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:10.899 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.904 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:10.908 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.910 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:10.913 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.915 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:10.918 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.920 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:10.922 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:10.924 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:10.948 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:10.950 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.952 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:10.979 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:10.981 +03:00 [INF] Worker running at: "2025-10-20T14:54:10.9813160+03:00"
2025-10-20 14:54:10.983 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:10.987 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:10.988 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:10.989 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.991 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:10.993 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:10.995 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:10.996 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:10.997 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.011 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.014 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.016 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.018 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.019 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:11.022 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.024 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:11.075 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:11.078 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.081 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.084 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.087 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:11.090 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:11.092 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.097 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.102 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.104 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:11.106 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.107 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:11.109 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.111 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.112 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:11.113 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:11.130 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:11.133 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.136 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:11.157 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:11.159 +03:00 [INF] Worker running at: "2025-10-20T14:54:11.1596246+03:00"
2025-10-20 14:54:11.161 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:11.165 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:11.167 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:11.168 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.171 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.174 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.175 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:11.177 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:11.180 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.194 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.199 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.201 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.204 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.207 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:11.211 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.213 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:11.267 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:11.269 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.270 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.272 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.273 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:11.275 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:11.278 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.284 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.289 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.292 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:11.295 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.297 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:11.300 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.303 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.305 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:11.307 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:11.341 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:11.343 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.346 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:11.384 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:11.390 +03:00 [INF] Worker running at: "2025-10-20T14:54:11.3905363+03:00"
2025-10-20 14:54:11.394 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:11.399 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:11.400 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:11.403 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.406 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.409 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.411 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:11.414 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:11.416 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.432 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.435 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.437 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.440 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.441 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:11.444 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.446 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:11.494 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:11.496 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.498 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.501 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.502 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:11.505 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:11.508 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.514 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.517 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.519 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 1ms reading results.
2025-10-20 14:54:11.521 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.523 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:11.525 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.527 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.528 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:11.530 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:11.552 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:11.554 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.557 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-10-20 14:54:11.578 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:11.580 +03:00 [INF] Worker running at: "2025-10-20T14:54:11.5809069+03:00"
2025-10-20 14:54:11.584 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:11.587 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:11.588 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:11.590 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.593 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.597 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.600 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:11.603 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-10-20 14:54:11.605 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.618 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.624 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.627 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.631 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.633 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 10ms reading results.
2025-10-20 14:54:11.637 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.639 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:11.705 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:11.708 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.710 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.713 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.714 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:11.716 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:11.719 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.726 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.730 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.733 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 3ms reading results.
2025-10-20 14:54:11.738 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.741 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:11.744 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.746 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.748 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:11.750 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:11.771 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:11.772 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.774 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-10-20 14:54:11.797 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:11.800 +03:00 [INF] Worker running at: "2025-10-20T14:54:11.8002009+03:00"
2025-10-20 14:54:11.802 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:11.807 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:11.809 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:11.811 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.817 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.819 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.821 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:11.823 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:11.825 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.837 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:11.840 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.841 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:11.843 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.845 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 4ms reading results.
2025-10-20 14:54:11.847 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.848 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (1ms).
2025-10-20 14:54:11.900 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:11.902 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.904 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.906 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:11.908 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:11.910 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:11.912 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.918 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:11.921 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.924 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:11.926 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.929 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:11.931 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.933 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:11.935 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:11.937 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:11.966 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:11.969 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:11.973 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-10-20 14:54:12.000 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:12.003 +03:00 [INF] Worker running at: "2025-10-20T14:54:12.0039160+03:00"
2025-10-20 14:54:12.006 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:12.010 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:12.011 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:12.013 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.015 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.017 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.018 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.020 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:12.022 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.038 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.043 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.045 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.046 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.048 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 5ms reading results.
2025-10-20 14:54:12.050 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.052 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:12.103 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:12.105 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.107 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.109 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.111 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.114 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:12.117 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.127 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.134 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.137 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 2ms reading results.
2025-10-20 14:54:12.139 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.142 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:12.145 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.147 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.149 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:12.150 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:12.167 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:12.169 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.173 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-10-20 14:54:12.196 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:12.198 +03:00 [INF] Worker running at: "2025-10-20T14:54:12.1989444+03:00"
2025-10-20 14:54:12.201 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:12.205 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:12.206 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:12.208 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.211 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.214 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.216 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:12.219 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-20 14:54:12.222 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.236 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.242 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.245 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.248 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.251 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 8ms reading results.
2025-10-20 14:54:12.254 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.257 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (2ms).
2025-10-20 14:54:12.320 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
2025-10-20 14:54:12.323 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.324 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.325 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.327 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-20 14:54:12.329 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-20 14:54:12.332 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.388 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__entity_Id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[Id], [o].[Aggregate_id], [o].[CreatedDate], [o].[ErrorMsg], [o].[Event_type], [o].[Payload], [o].[Processed], [o].[ProcessingStatus]
FROM [Outbox_events] AS [o]
WHERE [o].[Id] = @__entity_Id_0
2025-10-20 14:54:12.428 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.434 +03:00 [DBG] A data reader for 'GAC-BillingService' on server '.' is being disposed after spending 6ms reading results.
2025-10-20 14:54:12.450 +03:00 [DBG] Closing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.453 +03:00 [DBG] Closed connection to database 'GAC-BillingService' on server '.' (3ms).
2025-10-20 14:54:12.458 +03:00 [DBG] SaveChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.460 +03:00 [DBG] DetectChanges starting for 'BillingServiceDBContext'.
2025-10-20 14:54:12.462 +03:00 [DBG] DetectChanges completed for 'BillingServiceDBContext'.
2025-10-20 14:54:12.464 +03:00 [DBG] SaveChanges completed for 'BillingServiceDBContext' with 0 entities written to the database.
2025-10-20 14:54:12.483 +03:00 [DBG] 'BillingServiceDBContext' disposed.
2025-10-20 14:54:12.488 +03:00 [DBG] Disposing connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.493 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-10-20 14:54:12.517 +03:00 [ERR] exception occured Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'x-dead-letter-exchange' for queue 'InvoiceCreatedQueue' in vhost '/': received none but current is the value 'InvoiceCreatedExchange' of type 'longstr'', classId=50, methodId=10 , stackTrace    at RabbitMQ.Client.Impl.SessionBase.ThrowAlreadyClosedException()
   at RabbitMQ.Client.Impl.SessionBase.TransmitAsync[T](T& cmd, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.Channel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.AutorecoveringChannel.QueueDeclareAsync(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments, Boolean passive, Boolean noWait, CancellationToken cancellationToken)
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.<>c__DisplayClass5_0`1.<<PublishMessageToQueueAsync>b__0>d.MoveNext() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 33
--- End of stack trace from previous location ---
   at BillingSystem.Infrastructure.Bus.RabbitMqBus.PublishMessageToQueueAsync[T](T message, String queueName) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.Infrastructure\Bus\RabbitMqBus.cs:line 36
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 81
   at BillingSystem.OutboxProcessor.Worker.ProcessBulkInvoicesAsync() in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 91
   at BillingSystem.OutboxProcessor.Worker.ExecuteAsync(CancellationToken stoppingToken) in C:\Repositories\Gac-BillingSystem\src\BillingSystem.OutboxProcessor\Worker.cs:line 53
2025-10-20 14:54:12.519 +03:00 [INF] Worker running at: "2025-10-20T14:54:12.5199535+03:00"
2025-10-20 14:54:12.522 +03:00 [DBG] Entity Framework Core 9.0.9 initialized 'BillingServiceDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.9' with options: EngineType=SqlServer 
2025-10-20 14:54:12.525 +03:00 [DBG] Creating DbConnection.
2025-10-20 14:54:12.526 +03:00 [DBG] Created DbConnection. (1ms).
2025-10-20 14:54:12.528 +03:00 [DBG] Opening connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.530 +03:00 [DBG] Opened connection to database 'GAC-BillingService' on server '.'.
2025-10-20 14:54:12.532 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-20 14:54:12.534 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-20 14:54:12.547 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-10-20 14:54:12.550 +03:00 [DBG] Executing DbCommand [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.562 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
EXECUTE dbo.GetNextPendingRowsForProcessing @p0
2025-10-20 14:54:12.565 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.567 +03:00 [DBG] Context 'BillingServiceDBContext' started tracking 'OutboxEvent' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-20 14:54:12.570 +03:00 [DBG] Closing data reader to 'GAC-BillingService' on server '.'.
